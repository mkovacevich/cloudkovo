/*! Skuid Banzai 7.24.0 30-10-2015 */
!function(a,b){var c=a.datajs||{},d=a.OData||{};"function"==typeof define&&define.amd?(define("datajs",c),define("OData",d)):(a.datajs=c,a.OData=d),c.version={major:1,minor:1,build:1};var e=function(b){return a.ActiveXObject?new a.ActiveXObject(b):null},f=function(a){return null!==a&&a!==b},g=function(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},h=function(a,c){return a!==b?a:c},i=function(b){if(1===arguments.length)return void a.setTimeout(b,0);var c=Array.prototype.slice.call(arguments,1);a.setTimeout(function(){b.apply(this,c)},0)},j=function(a,b){for(var c in b)a[c]=b[c];return a},k=function(a,b){if(a){var c,d;for(c=0,d=a.length;d>c;c++)if(b(a[c]))return a[c]}return null},l=function(a){return"[object Array]"===Object.prototype.toString.call(a)},m=function(a){return"[object Date]"===Object.prototype.toString.call(a)},n=function(a){return"object"==typeof a},o=function(a){return parseInt(a,10)},p=function(a,b,c){a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b])},q=function(a){throw a},r=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},s=function(a,c){return a!==b?a:c},t=/^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#:]+)?(\?[^#]*)?(#.*)?/,u=["scheme","authority","path","query","fragment"],v=function(a){var b={isAbsolute:!1};if(a){var c=t.exec(a);if(c){var d,e;for(d=0,e=u.length;e>d;d++)c[d+1]&&(b[u[d]]=c[d+1])}b.scheme&&(b.isAbsolute=!0)}return b},w=function(a){return"".concat(a.scheme||"",a.authority||"",a.path||"",a.query||"",a.fragment||"")},x=/^\/{0,2}(?:([^@]*)@)?([^:]+)(?::{1}(\d+))?/,y=/%[0-9A-F]{2}/gi,z=function(a){var b=v(a),c=b.scheme,d=b.authority;if(c&&(b.scheme=c.toLowerCase(),d)){var e=x.exec(d);e&&(b.authority="//"+(e[1]?e[1]+"@":"")+e[2].toLowerCase()+(e[3]?":"+e[3]:""))}return a=w(b),a.replace(y,function(a){return a.toLowerCase()})},A=function(a,b){if(!b)return a;var c=v(a);if(c.isAbsolute)return a;var d,e=v(b),f={};return c.authority?(f.authority=c.authority,d=c.path,f.query=c.query):(c.path?(d="/"===c.path.charAt(0)?c.path:B(c.path,e.path),f.query=c.query):(d=e.path,f.query=c.query||e.query),f.authority=e.authority),f.path=C(d),f.scheme=e.scheme,f.fragment=c.fragment,w(f)},B=function(a,b){var c,d="/";return b&&(c=b.lastIndexOf("/"),d=b.substring(0,c),"/"!==d.charAt(d.length-1)&&(d+="/")),d+a},C=function(a){for(var b,c="",d="";a;)0===a.indexOf("..")||0===a.indexOf(".")?a=a.replace(/^\.\.?\/?/g,""):0===a.indexOf("/..")?(a=a.replace(/^\/\..\/?/g,"/"),b=c.lastIndexOf("/"),c=-1===b?"":c.substring(0,b)):0===a.indexOf("/.")?a=a.replace(/^\/\.\/?/g,"/"):(d=a,b=a.indexOf("/",1),-1!==b&&(d=a.substring(0,b)),c+=d,a=a.replace(d,""));return c},D=function(c){var d=[];if(a.atob===b)d=E(c);else for(var e=a.atob(c),f=0;f<e.length;f++)d.push(e.charCodeAt(f));for(var g="",h="0123456789ABCDEF",i=0;i<d.length;i++){var j=d[i];g+=h[j>>4],g+=h[15&j]}return g},E=function(a){for(var b="",c=0;c<a.length;c++){var d=F(a[c]),e="";null!==d&&(e=d.toString(2),b+=G(e))}var f=[],g=parseInt(b.length/8,10);for(c=0;g>c;c++){var h=parseInt(b.substring(8*c,8*(c+1)),2);f.push(h)}return f},F=function(a){var b=a.charCodeAt(0),c=65,d=6;return b>=65&&90>=b?b-c:b>=97&&122>=b?b-c-d:b>=48&&57>=b?b+4:"+"==a?62:"/"==a?63:null},G=function(a){for(;a.length<6;)a="0"+a;return a},H="http://",I=H+"www.w3.org/",J=I+"1999/xhtml",K=I+"2000/xmlns/",L=I+"XML/1998/namespace",M=H+"www.mozilla.org/newlayout/xml/parsererror.xml",N=function(a){var b=/(^\s)|(\s$)/;return b.test(a)},O=function(a){var b=/^\s*$/;return null===a||b.test(a)},P=function(a){for(;null!==a&&1===a.nodeType;){var b=$(a,"space",L);if("preserve"===b)return!0;if("default"===b)break;a=a.parentNode}return!1},Q=function(a){var b=a.nodeName;return"xmlns"==b||0===b.indexOf("xmlns:")},R=function(a,b,c){try{a.setProperty(b,c)}catch(d){}},S=function(){var a=e("Msxml2.DOMDocument.3.0");return a&&(R(a,"ProhibitDTD",!0),R(a,"MaxElementDepth",256),R(a,"AllowDocumentFunction",!1),R(a,"AllowXsltScript",!1)),a},T=function(){try{var a=e("Msxml2.DOMDocument.6.0");return a&&(a.async=!0),a}catch(b){return S()}},U=function(a){var b=T();if(!b)return null;b.loadXML(a);var c=b.parseError;return 0!==c.errorCode&&V(c.reason,c.srcText,a),b},V=function(a,b,c){throw"string"==typeof a&&(a={message:a}),j(a,{srcText:b||"",errorXmlText:c||""})},W=function(b){var c,d=a.DOMParser&&new a.DOMParser;if(!d)return c=U(b),c||V("XML DOM parser not supported"),c;try{c=d.parseFromString(b,"text/xml")}catch(e){V(e,"",b)}var f=c.documentElement,g=f.namespaceURI,h=ib(f);if("parsererror"===h&&g===M){var i=eb(f,M,"sourcetext"),j=i?kb(i):"";V(hb(f)||"",j,b)}if("h3"===h&&g===J||fb(f,J,"h3")){for(var k="",l=[],m=f.firstChild;m;)1===m.nodeType&&(k+=hb(m)||""),l.push(m.nextSibling),m=m.firstChild||l.shift();k+=hb(f)||"",V(k,"",b)}return c},X=function(a,b){return a?a+":"+b:b},Y=function(a,b){if(N(b.data)){var c=_(a,L,"space");c||(c=qb(a.ownerDocument,L,X("xml","space")),pb(a,c)),c.value="preserve"}return a.appendChild(b),a},Z=function(a,b){var c,d,e=a.attributes;for(c=0,d=e.length;d>c;c++)b(e.item(c))},$=function(a,b,c){var d=_(a,b,c);return d?kb(d):null},_=function(a,b,c){var d=a.attributes;return d.getNamedItemNS?d.getNamedItemNS(c||null,b):d.getQualifiedItem(b,c)||null},ab=function(a,b){var c=_(a,"base",L);return(c?A(c.value,b):b)||null},bb=function(a,b){lb(a,!1,function(a){return 1===a.nodeType&&b(a),!0})},cb=function(a,b,c){var d,e,f=c.split("/");for(d=0,e=f.length;e>d;d++)a=a&&eb(a,b,f[d]);return a||null},db=function(a,b,c){var d=c.lastIndexOf("/"),e=c.substring(d+1),f=c.substring(0,d),g=f?cb(a,b,f):a;return g?"@"===e.charAt(0)?_(g,e.substring(1),b):eb(g,b,e):null},eb=function(a,b,c){return gb(a,b,c,!1)},fb=function(a,b,c){if(a.getElementsByTagNameNS){var d=a.getElementsByTagNameNS(b,c);return d.length>0?d[0]:null}return gb(a,b,c,!0)},gb=function(a,b,c,d){var e=null;return lb(a,d,function(a){if(1===a.nodeType){var d=!b||jb(a)===b,f=!c||ib(a)===c;d&&f&&(e=a)}return null===e}),e},hb=function(a){var c,d=null,e=9===a.nodeType&&a.documentElement?a.documentElement:a,f=e.ownerDocument.preserveWhiteSpace===!1;return lb(e,!1,function(a){if(3===a.nodeType||4===a.nodeType){var g=kb(a),h=f||!O(g);h||(c===b&&(c=P(e)),h=c),h&&(d?d+=g:d=g)}return!0}),d},ib=function(a){return a.localName||a.baseName},jb=function(a){return a.namespaceURI||null},kb=function(a){return 1===a.nodeType?hb(a):a.nodeValue},lb=function(a,b,c){for(var d=[],e=a.firstChild,f=!0;e&&f;)f=c(e),f&&(b&&e.firstChild&&d.push(e.firstChild),e=e.nextSibling||d.shift())},mb=function(a,b,c){for(var d=a.nextSibling;d;){if(1===d.nodeType){var e=!b||jb(d)===b,f=!c||ib(d)===c;if(e&&f)return d}d=d.nextSibling}return null},nb=function(){var b=a.document.implementation;return b&&b.createDocument?b.createDocument(null,null,null):T()},ob=function(a,b){if(!l(b))return pb(a,b);var c,d;for(c=0,d=b.length;d>c;c++)b[c]&&pb(a,b[c]);return a},pb=function(a,b){if(b){if("string"==typeof b)return Y(a,ub(a.ownerDocument,b));2===b.nodeType?a.setAttributeNodeNS?a.setAttributeNodeNS(b):a.setAttributeNode(b):a.appendChild(b)}return a},qb=function(a,c,d,e){var f=a.createAttributeNS&&a.createAttributeNS(c,d)||a.createNode(2,d,c||b);return f.value=e||"",f},rb=function(a,c,d,e){var f=a.createElementNS&&a.createElementNS(c,d)||a.createNode(1,d,c||b);return ob(f,e||[])},sb=function(a,b,c){return qb(a,K,X("xmlns",c),b)},tb=function(a,b){for(var c="<c>"+b+"</c>",d=W(c),e=d.documentElement,f=("importNode"in a?a.importNode(e,!0):e),g=a.createDocumentFragment(),h=f.firstChild;h;)g.appendChild(h),h=h.nextSibling;return g},ub=function(a,b){return a.createTextNode(b)},vb=function(a,b,c,d,e){var f,g,h="",i=e.split("/"),j=eb,k=rb,l=b;for(f=0,g=i.length;g>f;f++){h=i[f],"@"===h.charAt(0)&&(h=h.substring(1),j=_,k=qb);var m=j(l,c,h);m||(m=k(a,c,X(d,h)),pb(l,m)),l=m}return l},wb=function(b){var c=a.XMLSerializer;if(c){var d=new c;return d.serializeToString(b)}if(b.xml)return b.xml;throw{message:"XML serialization unsupported"}},xb=function(a){var b,c=a.childNodes,d=c.length;if(0===d)return"";var e=a.ownerDocument,f=e.createDocumentFragment(),g=e.createElement("c");for(f.appendChild(g),b=0;d>b;b++)g.appendChild(c[b]);var h=wb(f);for(h=h.substr(3,h.length-7),b=0;d>b;b++)a.appendChild(g.childNodes[b]);return h},yb=function(a,b,c){return function(){return a[b].apply(a,arguments),c}},zb=function(){this._arguments=b,this._done=b,this._fail=b,this._resolved=!1,this._rejected=!1};zb.prototype={then:function(a,b){return a&&(this._done?this._done.push(a):this._done=[a]),b&&(this._fail?this._fail.push(b):this._fail=[b]),this._resolved?this.resolve.apply(this,this._arguments):this._rejected&&this.reject.apply(this,this._arguments),this},resolve:function(){if(this._done){var a,c;for(a=0,c=this._done.length;c>a;a++)this._done[a].apply(null,arguments);this._done=b,this._resolved=!1,this._arguments=b}else this._resolved=!0,this._arguments=arguments},reject:function(){if(this._fail){var a,c;for(a=0,c=this._fail.length;c>a;a++)this._fail[a].apply(null,arguments);this._fail=b,this._rejected=!1,this._arguments=b}else this._rejected=!0,this._arguments=arguments},promise:function(){var a={};return a.then=yb(this,"then",a),a}};var Ab=function(){return a.jQuery&&a.jQuery.Deferred?new a.jQuery.Deferred:new zb},Bb=function(a,b){var c=(a&&a.__metadata||{}).type;return c||(b?b.type:null)},Cb="Edm.",Db=Cb+"Binary",Eb=Cb+"Boolean",Fb=Cb+"Byte",Gb=Cb+"DateTime",Hb=Cb+"DateTimeOffset",Ib=Cb+"Decimal",Jb=Cb+"Double",Kb=Cb+"Guid",Lb=Cb+"Int16",Mb=Cb+"Int32",Nb=Cb+"Int64",Ob=Cb+"SByte",Pb=Cb+"Single",Qb=Cb+"String",Rb=Cb+"Time",Sb=Cb+"Geography",Tb=Sb+"Point",Ub=Sb+"LineString",Vb=Sb+"Polygon",Wb=Sb+"Collection",Xb=Sb+"MultiPolygon",Yb=Sb+"MultiLineString",Zb=Sb+"MultiPoint",$b=Cb+"Geometry",_b=$b+"Point",ac=$b+"LineString",bc=$b+"Polygon",cc=$b+"Collection",dc=$b+"MultiPolygon",ec=$b+"MultiLineString",fc=$b+"MultiPoint",gc="Point",hc="LineString",ic="Polygon",jc="MultiPoint",kc="MultiLineString",lc="MultiPolygon",mc="GeometryCollection",nc=[Qb,Mb,Nb,Eb,Jb,Pb,Gb,Hb,Rb,Ib,Kb,Fb,Lb,Ob,Db],oc=[$b,_b,ac,bc,cc,dc,ec,fc],pc=[Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb],qc=function(a,b){if(!a)return null;if(l(a)){var c,d,e;for(c=0,d=a.length;d>c;c++)if(e=qc(a[c],b))return e;return null}return a.dataServices?qc(a.dataServices.schema,b):b(a)},rc=function(a,b){return a=0===a?"":"."+uc(a.toString(),3),b>0&&(""===a&&(a=".000"),a+=uc(b.toString(),4)),a},sc=function(a){if("string"==typeof a)return a;var b=Dc(a),c=vc(a.__offset);if(b&&"Z"!==c){a=new Date(a.valueOf());var d=id(c),e=a.getUTCHours()+d.d*d.h,f=a.getUTCMinutes()+d.d*d.m;a.setUTCHours(e,f)}else b||(c="");var g=a.getUTCFullYear(),h=a.getUTCMonth()+1,i="";0>=g&&(g=-(g-1),i="-");var j=rc(a.getUTCMilliseconds(),a.__ns);return i+uc(g,4)+"-"+uc(h,2)+"-"+uc(a.getUTCDate(),2)+"T"+uc(a.getUTCHours(),2)+":"+uc(a.getUTCMinutes(),2)+":"+uc(a.getUTCSeconds(),2)+j+c},tc=function(a){var b=a.ms,c="";0>b&&(c="-",b=-b);var d=Math.floor(b/864e5);b-=864e5*d;var e=Math.floor(b/36e5);b-=36e5*e;var f=Math.floor(b/6e4);b-=6e4*f;var g=Math.floor(b/1e3);return b-=1e3*g,c+"P"+uc(d,2)+"DT"+uc(e,2)+"H"+uc(f,2)+"M"+uc(g,2)+rc(b,a.ns)+"S"},uc=function(a,b,c){for(var d=a.toString(10);d.length<b;)c?d+="0":d="0"+d;return d},vc=function(a){return a&&"Z"!==a&&"+00:00"!==a&&"-00:00"!==a?a:"Z"},wc=function(a){if("string"==typeof a){var b=a.indexOf(")",10);if(0===a.indexOf("Collection(")&&b>0)return a.substring(11,b)}return null},xc=function(a,c,d,e,f,g){return f.request(a,function(f){try{f.headers&&ad(f.headers),f.data===b&&204!==f.statusCode&&e.read(f,g)}catch(h){return h.request===b&&(h.request=a),h.response===b&&(h.response=f),void d(h)}c(f.data,f)},d)},yc=function(a){return Cc(a)&&l(a.__batchRequests)},zc=/Collection\((.*)\)/,Ac=function(a,b){var c=a&&a.results||a;return!!c&&Bc(b)||!b&&l(c)&&!Cc(c[0])},Bc=function(a){return zc.test(a)},Cc=function(a){return!!a&&n(a)&&!l(a)&&!m(a)},Dc=function(a){return"Edm.DateTimeOffset"===a.__edmType||!a.__edmType&&a.__offset},Ec=function(a){if(!a&&!Cc(a))return!1;var b=a.__metadata||{},c=a.__deferred||{};return!b.type&&!!c.uri},Fc=function(a){return Cc(a)&&a.__metadata&&"uri"in a.__metadata},Gc=function(a,b){var c=a&&a.results||a;return l(c)&&!Bc(b)&&Cc(c[0])},Hc=function(a){return g(pc,a)},Ic=function(a){return g(oc,a)},Jc=function(a){if(!a&&!Cc(a))return!1;var b=a.__metadata,c=a.__mediaresource;return!b&&!!c&&!!c.media_src},Kc=function(a){return m(a)||"string"==typeof a||"number"==typeof a||"boolean"==typeof a},Lc=function(a){return g(nc,a)},Mc=function(a,c){return Ec(a)?"deferred":Fc(a)?"entry":Gc(a)?"feed":c&&c.relationship?null!==a&&a!==b&&Gc(a)?"feed":"entry":null},Nc=function(a,b){return k(a,function(a){return a.name===b})},Oc=function(a,b,c){return a?qc(b,function(b){return Zc(a,b,c)}):null},Pc=function(a,b){return k(a,function(a){return a.name===b})},Qc=function(a,b){return Oc(a,b,"complexType")},Rc=function(a,b){return Oc(a,b,"entityType")},Sc=function(a){return qc(a,function(a){return k(a.entityContainer,function(a){return bd(a.isDefaultEntityContainer)})})},Tc=function(a,b){return Oc(a,b,"entityContainer")},Uc=function(a,b){return k(a,function(a){return a.name===b})},Vc=function(a,b){var c=null;if(a){var d=a.relationship,e=qc(b,function(a){var b=Yc(a.namespace,d),c=a.association;if(b&&c){var e,f;for(e=0,f=c.length;f>e;e++)if(c[e].name===b)return c[e]}return null});if(e){var f=e.end[0];f.role!==a.toRole&&(f=e.end[1]),c=f.type}}return c},Wc=function(a,b,c){if(a){var d=a.relationship,e=qc(c,function(a){for(var b=a.entityContainer,c=0;c<b.length;c++){var e=b[c].associationSet;if(e)for(var f=0;f<e.length;f++)if(e[f].association==d)return e[f]}return null});if(e&&e.end[0]&&e.end[1])return e.end[0].entitySet==b?e.end[1].entitySet:e.end[0].entitySet}return null},Xc=function(a,b){var c=qc(b,function(b){for(var c=b.entityContainer,d=0;d<c.length;d++){var e=c[d].entitySet;if(e)for(var f=0;f<e.length;f++)if(e[f].name==a)return{entitySet:e[f],containerName:c[d].name,functionImport:c[d].functionImport}}return null});return c},Yc=function(a,b){return 0===b.indexOf(a)&&"."===b.charAt(a.length)?b.substr(a.length+1):null},Zc=function(a,b,c){if(a&&b){var d=Yc(b.namespace,a);if(d)return k(b[c],function(a){return a.name===d})}return null},$c=function(a,b){if(a===b)return a;for(var c=a.split("."),d=b.split("."),e=c.length>=d.length?c.length:d.length,f=0;e>f;f++){var g=c[f]&&o(c[f]),h=d[f]&&o(d[f]);if(g>h)return a;if(h>g)return b}},_c={accept:"Accept","content-type":"Content-Type",dataserviceversion:"DataServiceVersion",maxdataserviceversion:"MaxDataServiceVersion"},ad=function(a){for(var b in a){var c=b.toLowerCase(),d=_c[c];if(d&&b!==d){var e=a[b];delete a[b],a[d]=e}}},bd=function(a){return"boolean"==typeof a?a:"string"==typeof a&&"true"===a.toLowerCase()},cd=/^(-?\d{4,})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:\.(\d+))?(.*)$/,dd=function(a,b,c){var d=cd.exec(a),e=d?vc(d[8]):null;if(!d||!b&&"Z"!==e){if(c)return null;throw{message:"Invalid date/time value"}}var f=o(d[1]);0>=f&&f++;var g=d[7],h=0;if(g){if(g.length>7){if(c)return null;throw{message:"Cannot parse date/time value to given precision."}}h=uc(g.substring(3),4,!0),g=uc(g.substring(0,3),3,!0),g=o(g),h=o(h)}else g=0;var i=o(d[4]),j=o(d[5]),k=o(d[6])||0;if("Z"!==e){var l=id(e),m=-l.d;i+=l.h*m,j+=l.m*m}var n=new Date;if(n.setUTCFullYear(f,o(d[2])-1,o(d[3])),n.setUTCHours(i,j,k,g),isNaN(n.valueOf())){if(c)return null;throw{message:"Invalid date/time value"}}return b&&(n.__edmType="Edm.DateTimeOffset",n.__offset=e),h&&(n.__ns=h),n},ed=function(a,b){return dd(a,!1,b)},fd=function(a,b){return dd(a,!0,b)},gd=/^([+-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/,hd=function(a){var b=gd.exec(a);if(null===b)throw{message:"Invalid duration value."};var c=b[2]||"0",d=b[3]||"0",e=o(b[4]||0),f=o(b[5]||0),g=o(b[6]||0),h=parseFloat(b[7]||0);if("0"!==c||"0"!==d)throw{message:"Unsupported duration value."};var i=b[8],j=0;if(i){if(i.length>7)throw{message:"Cannot parse duration value to given precision."};j=uc(i.substring(3),4,!0),i=uc(i.substring(0,3),3,!0),i=o(i),j=o(j)}else i=0;i+=1e3*h+6e4*g+36e5*f+864e5*e,"-"===b[1]&&(i=-i);var k={ms:i,__edmType:"Edm.Time"};return j&&(k.ns=j),k},id=function(a){var b=a.substring(0,1);b="+"===b?1:-1;var c=o(a.substring(1)),d=o(a.substring(a.indexOf(":")+1));return{d:b,h:c,m:d}},jd=function(a,c,d){a.method||(a.method="GET"),a.headers?ad(a.headers):a.headers={},a.headers.Accept===b&&(a.headers.Accept=c.accept),f(a.data)&&a.body===b&&c.write(a,d),f(a.headers.MaxDataServiceVersion)||(a.headers.MaxDataServiceVersion=c.maxDataServiceVersion||"1.0")},kd=function(a,c,d){if(a&&"object"==typeof a)for(var e in a){var f=a[e],g=kd(f,e,d);g=d(e,g,c),g!==f&&(f===b?delete a[e]:a[e]=g)}return a},ld=function(a,b){return b("",kd(a,"",b))},md=0,nd=function(a){return a.method&&"GET"!==a.method?!1:!0},od=function(b){var c=a.document.createElement("IFRAME");c.style.display="none";var d=b.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;"),e='<html><head><script type="text/javascript" src="'+d+'"></script></head><body></body></html>',f=a.document.getElementsByTagName("BODY")[0];return f.appendChild(c),vd(c,e),c},pd=function(){if(a.XMLHttpRequest)return new a.XMLHttpRequest;var b;if(a.ActiveXObject)try{return new a.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){try{return new a.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){b=d}}else b={message:"XMLHttpRequest not supported"};throw b},qd=function(a){return 0===a.indexOf("http://")||0===a.indexOf("https://")||0===a.indexOf("file://")},rd=function(b){if(!qd(b))return!0;var c=a.location,d=c.protocol+"//"+c.host+"/";return 0===b.indexOf(d)},sd=function(c,d){try{delete a[c]}catch(e){a[c]=b,d===md-1&&(md-=1)}},td=function(a){return a&&(vd(a,""),a.parentNode.removeChild(a)),null},ud=function(a,b){var c,d,e=a.getAllResponseHeaders().split(/\r?\n/);for(c=0,d=e.length;d>c;c++)if(e[c]){var f=e[c].split(": ");b[f[0]]=f[1]}},vd=function(a,b){var c=a.contentWindow?a.contentWindow.document:a.contentDocument.document;c.open(),c.write(b),c.close()};d.defaultHttpClient={callbackParameterName:"$callback",formatQueryString:"$format=json",enableJsonpCallback:!1,request:function(c,d,e){var f,g={},j=null,k=!1;g.abort=function(){f=td(f),k||(k=!0,j&&(j.abort(),j=null),e({message:"Request aborted"}))};var l,m=function(){f=td(f),k||(k=!0,j=null,e({message:"Request timed out"}))},n=c.requestUri,o=h(c.enableJsonpCallback,this.enableJsonpCallback),p=h(c.callbackParameterName,this.callbackParameterName),q=h(c.formatQueryString,this.formatQueryString);if(!o||rd(n)){if(j=pd(),j.onreadystatechange=function(){if(!k&&null!==j&&4===j.readyState){var a=j.statusText,b=j.status;1223===b&&(b=204,a="No Content");var f=[];ud(j,f);var g={requestUri:n,statusCode:b,statusText:a,headers:f,body:j.responseText};k=!0,j=null,b>=200&&299>=b?d(g):e({message:"HTTP request failed",request:c,response:g})}},j.open(c.method||"GET",n,!0,c.user,c.password),c.headers)for(l in c.headers)j.setRequestHeader(l,c.headers[l]);c.timeoutMS&&(j.timeout=c.timeoutMS,j.ontimeout=m),j.send(c.body)}else{if(!nd(c))throw{message:"Request is not local and cannot be done through JSONP."};var r=md;md+=1;var s,t=r.toString(),u=!1;l="handleJSONP_"+t,a[l]=function(c){if(f=td(f),!k){u=!0,a.clearTimeout(s),sd(l,r),a.ActiveXObject&&(c=a.JSON.parse(a.JSON.stringify(c)));var e;e=c.d===b?{"Content-Type":"application/json;odata=minimalmetadata",dataServiceVersion:"3.0"}:{"Content-Type":"application/json"},i(function(){td(f),d({body:c,statusCode:200,headers:e})})}};var v=c.timeoutMS?c.timeoutMS:12e4;s=a.setTimeout(m,v);var w=p+"=parent."+l;this.formatQueryString&&(w+="&"+q);var x=n.indexOf("?");-1===x?n=n+"?"+w:x===n.length-1?n+=w:n=n+"&"+w,f=od(n)}return g}};var wd="3.0",xd=function(a){if(!a)return null;var b,c,d=a.split(";"),e={};for(b=1,c=d.length;c>b;b++){var f=d[b].split("=");e[r(f[0])]=f[1]}return{mediaType:r(d[0]),properties:e}},yd=function(a){if(!a)return b;var c,d=a.mediaType;for(c in a.properties)d+=";"+c+"="+a.properties[c];return d},zd=function(a,b,c,d){var e={};return j(e,c),j(e,{contentType:a,dataServiceVersion:b,handler:d}),e},Ad=function(a,b,c){if(a){var d=a.headers;d[b]||(d[b]=c)}},Bd=function(a,b){if(a){var c=a.headers,d=c.DataServiceVersion;c.DataServiceVersion=d?$c(d,b):b}},Cd=function(a,c){var d=a.headers;return d&&d[c]||b},Dd=function(a){return xd(Cd(a,"Content-Type"))},Ed=/^\s?(\d+\.\d+);?.*$/,Fd=function(a){var b=Cd(a,"DataServiceVersion");if(b){var c=Ed.exec(b);if(c&&c.length)return c[1]}},Gd=function(a,b){return a.accept.indexOf(b.mediaType)>=0},Hd=function(a,c,d,e){if(!d||!d.headers)return!1;var g=Dd(d),h=Fd(d)||"",i=d.body;if(!f(i))return!1;if(Gd(a,g)){var j=zd(g,h,e,a);return j.response=d,d.data=c(a,i,j),d.data!==b}return!1},Id=function(a,c,d,e){if(!d||!d.headers)return!1;var f=Dd(d),g=Fd(d);if(!f||Gd(a,f)){var h=zd(f,g,e,a);if(h.request=d,d.body=c(a,d.data,h),d.body!==b)return Bd(d,h.dataServiceVersion||"1.0"),Ad(d,"Content-Type",yd(h.contentType)),Ad(d,"MaxDataServiceVersion",a.maxDataServiceVersion),!0}return!1},Jd=function(a,b,c,d){return{accept:c,maxDataServiceVersion:d,read:function(b,c){return Hd(this,a,b,c)},write:function(a,c){return Id(this,b,a,c)}}},Kd=function(a,b){return b},Ld=function(a,c){return f(c)?c.toString():b};d.textHandler=Jd(Kd,Ld,"text/plain",wd);var Md=H+"www.opengis.net",Nd=Md+"/gml",Od=Md+"/def/crs/EPSG/0/",Pd="gml",Qd=function(a,b,c){var d={type:a};return d[b]=c,d},Rd=function(a){if(l(a)&&a.length>=2){var b=a[0];a[0]=a[1],a[1]=b}return a},Sd=function(a,b,c,d,e,f){var g=Td(a,c,d,e,f);return Qd(b,"coordinates",g)},Td=function(a,b,c,d,e){var f=[];return bb(a,function(a){if(jb(a)===Nd){var g=ib(a);if(g!==b)g===c&&bb(a,function(a){if(jb(a)===Nd){var b=d(a,e);b&&f.push(b)}});else{var h=eb(a,Nd);if(h){var i=d(h,e);i&&f.push(i)}}}}),f},Ud=function(a,b){var c=Td(a,"geometryMember","geometryMembers",ge,b);return Qd(mc,"geometries",c)},Vd=function(a,b){return Qd(hc,"coordinates",_d(a,b))},Wd=function(a,b){return Sd(a,kc,"curveMember","curveMembers",_d,b)},Xd=function(a,b){return Sd(a,jc,"pointMember","pointMembers",ae,b)},Yd=function(a,b){return Sd(a,lc,"surfaceMember","surfaceMembers",ce,b)},Zd=function(a,b){return Qd(gc,"coordinates",ae(a,b))},$d=function(a,b){return Qd(ic,"coordinates",ce(a,b))},_d=function(a,b){var c=[];return bb(a,function(a){var d=jb(a);if(d===Nd){var e=ib(a);return"posList"===e?void(c=ee(a,b)):"pointProperty"===e?void c.push(be(a,b)):"pos"===e?void c.push(fe(a,b)):void 0}}),c},ae=function(a,b){var c=eb(a,Nd,"pos");return c?fe(c,b):[]},be=function(a,b){var c=eb(a,Nd,"Point");return c?ae(c,b):[]},ce=function(a,b){var c=[],d=!1;return bb(a,function(a){if(jb(a)===Nd){var e=ib(a);return"exterior"===e?(d=!0,void c.unshift(de(a,b))):"interior"===e?void c.push(de(a,b)):void 0}}),!d&&c.length>0&&c.unshift([[]]),c},de=function(a,b){var c=[];return bb(a,function(a){jb(a)===Nd&&"LinearRing"===ib(a)&&(c=_d(a,b))}),c},ee=function(a,b){var c=fe(a,!1),d=c.length;if(d%2!==0)throw{message:"GML posList element has an uneven number of numeric values"};for(var e=[],f=0;d>f;f+=2){var g=c.slice(f,f+2);e.push(b?Rd(g):g)}return e},fe=function(a,b){var c=[],d=" 	\r\n",e=hb(a);if(e)for(var f=e.length,g=0,h=0;f>=h;){if(-1!==d.indexOf(e.charAt(h))){var i=e.substring(g,h);i&&c.push(parseFloat(i)),g=h+1}h++}return b?Rd(c):c},ge=function(a,b){var c,d=ib(a);switch(d){case"Point":c=Zd;break;case"Polygon":c=$d;break;case"LineString":c=Vd;break;case"MultiPoint":c=Xd;break;case"MultiCurve":c=Wd;break;case"MultiSurface":c=Yd;break;case"MultiGeometry":c=Ud;break;default:throw{message:"Unsupported element: "+d,element:a}}var e=c(a,b),f=$(a,"srsName",Nd)||$(a,"srsName");if(f){if(0!==f.indexOf(Od))throw{message:"Unsupported srs name: "+f,element:a};var g=f.substring(Od.length);g&&(e.crs={type:"name",properties:{name:"EPSG:"+g}})}return e},he=function(a,b,c,d){var e;switch(c){case gc:e=pe;break;case hc:e=qe;break;case ic:e=re;break;case jc:e=te;break;case kc:e=ue;break;case lc:e=ve;break;case mc:e=xe;break;default:return null}var f=e(a,b,d),g=b.crs;if(g&&"name"===g.type){var h=g.properties,i=h&&h.name;if(i&&0===i.indexOf("ESPG:")&&i.length>5){var j=i.substring(5),k=qb(a,null,"srsName",Pd+j);pb(f,k)}}return f},ie=function(a,b,c){return rb(a,Nd,X(Pd,b),c)},je=function(a,b,c){var d=l(b)?b:[];return d=c?Rd(d):d,ie(a,"pos",d.join(" "))},ke=function(a,b,c,d){var e=ie(a,b);if(l(c)){var f,g;for(f=0,g=c.length;g>f;f++)pb(e,je(a,c[f],d));0===g&&pb(e,ie(a,"posList"))}return e},le=function(a,b,c){return ie(a,"Point",je(a,b,c))},me=function(a,b,c){return ke(a,"LineString",b,c)},ne=function(a,b,c,d){var e=ie(a,b);if(l(c)&&c.length>0){var f=ke(a,"LinearRing",c,d);pb(e,f)}return e},oe=function(a,b,c){var d=b&&b.length,e=ie(a,"Polygon");if(l(b)&&d>0){pb(e,ne(a,"exterior",b[0],c));var f;for(f=1;d>f;f++)pb(e,ne(a,"interior",b[f],c))}return e},pe=function(a,b,c){return le(a,b.coordinates,c)},qe=function(a,b,c){return me(a,b.coordinates,c)},re=function(a,b,c){return oe(a,b.coordinates,c)},se=function(a,b,c,d,e,f){var g=d&&d.length,h=ie(a,b);if(l(d)&&g>0){var i,j=ie(a,c);for(i=0;g>i;i++)pb(j,e(a,d[i],f));pb(h,j)}return h},te=function(a,b,c){return se(a,"MultiPoint","pointMembers",b.coordinates,le,c)},ue=function(a,b,c){return se(a,"MultiCurve","curveMembers",b.coordinates,me,c)},ve=function(a,b,c){return se(a,"MultiSurface","surfaceMembers",b.coordinates,oe,c)},we=function(a,b,c){return he(a,b,b.type,c)},xe=function(a,b,c){return se(a,"MultiGeometry","geometryMembers",b.geometries,we,c)},ye="application/xml",ze=H+"schemas.microsoft.com/ado/",Ae=ze+"2007/08/dataservices",Be=ze+"2007/06/edmx",Ce=ze+"2006/04/edm",De=ze+"2007/05/edm",Ee=ze+"2008/01/edm",Fe=ze+"2008/09/edm",Ge=ze+"2009/08/edm",He=ze+"2009/11/edm",Ie=Ae,Je=Ae+"/metadata",Ke=Ae+"/related/",Le=Ae+"/scheme",Me="d",Ne="m",Oe=function(a,b){var c={name:ib(a),value:a.value};return c[b?"namespaceURI":"namespace"]=jb(a),c},Pe=function(a,b){var c,d,e=[],f=[],g=a.attributes;for(c=0,d=g.length;d>c;c++){var h=g[c];jb(h)!==K&&e.push(Oe(h,b))}for(var i=a.firstChild;null!=i;)1===i.nodeType&&f.push(Pe(i,b)),i=i.nextSibling;var j={name:ib(a),value:hb(a),attributes:e,children:f};return j[b?"namespaceURI":"namespace"]=jb(a),j},Qe=function(a){return jb(a)===Ie&&"element"===ib(a)},Re=function(a,b){return{type:a,extensions:b}},Se=function(a){if(eb(a,Nd))return $b;var b=eb(a,Ie);if(!b)return Qb;if(Qe(b)){var c=mb(b,Ie);if(c&&Qe(c))return"Collection()"}return null},Te=function(a){var b=null,c=!1,d=[];return Z(a,function(a){var e=jb(a),f=ib(a),g=kb(a);if(e===Je){if("null"===f)return void(c="true"===g.toLowerCase());if("type"===f)return void(b=g)}return e!==L&&e!==K?void d.push(Oe(a,!0)):void 0}),{type:!b&&c?Qb:b,isNull:c,extensions:d}},Ue=function(a){if(jb(a)!==Ie)return null;var b=ib(a),c=Te(a),d=c.isNull,e=c.type,f=Re(e,c.extensions),g=d?null:Ve(a,e,f);return{name:b,value:g,metadata:f}},Ve=function(a,b,c){b||(b=Se(a),c.type=b);var d=Hc(b);return d||Ic(b)?We(a,b,d):Lc(b)?Xe(a,b):Bc(b)?Ze(a,b,c):Ye(a,b,c)},We=function(a,b,c){var d=eb(a,Nd),e=ge(d,c);return e.__metadata={type:b},e},Xe=function(a,b){var c=kb(a)||"";switch(b){case Eb:return bd(c);case Db:case Ib:case Kb:case Nb:case Qb:return c;case Fb:case Lb:case Mb:case Ob:return o(c);case Jb:case Pb:return parseFloat(c);case Rb:return hd(c);case Gb:return ed(c);case Hb:return fd(c)}return c},Ye=function(a,b,c){var d={__metadata:{type:b}};return bb(a,function(a){var b=Ue(a),e=b.name;c.properties=c.properties||{},c.properties[e]=b.metadata,d[e]=b.value}),d},Ze=function(a,b,c){var d=[],e=c.elements=[],f=wc(b);return bb(a,function(a){if(Qe(a)){var b=Te(a),c=b.extensions,g=b.type||f,h=Re(g,c),i=Ve(a,g,h);d.push(i),e.push(h)}}),{__metadata:{type:"Collection()"===b?null:b},results:d}},$e=function(a,c){if(jb(a)===Ie){c=ab(a,c);var d=ib(a);if("links"===d)return _e(a,c);if("uri"===d)return af(a,c)}return b},_e=function(a,b){var c=[];return bb(a,function(a){"uri"===ib(a)&&jb(a)===Ie&&c.push(af(a,b))}),{results:c}},af=function(a,b){var c=hb(a)||"";return{uri:A(c,b)}},bf=function(a,b){return b===$b||b===Sb?a&&a.type:b===_b||b===Tb?gc:b===ac||b===Ub?hc:b===bc||b===Vb?ic:b===cc||b===Wb?mc:b===dc||b===Xb?lc:b===ec||b===Yb?kc:b===fc||b===Zb?jc:null},cf=function(a,b,c){return rb(a,Je,X(Ne,b),c)},df=function(a,b,c){return qb(a,Je,X(Ne,b),c)},ef=function(a,b,c){return rb(a,Ie,X(Me,b),c)},ff=function(a,b){return b===Gb||b===Hb||m(a)?sc(a):b===Rb?tc(a):a.toString()},gf=function(a,b){return{element:a,dsv:b}},hf=function(a,b,c,d){var e=c?df(a,"type",c):null,f=ef(a,b,e);return ob(f,d)},jf=function(a,b,c,d){var e=ff(c,d),f=hf(a,b,d,e);return gf(f,"1.0")},kf=function(a,b,c,d){var e=df(a,"null","true"),f=hf(a,b,c,e),g=Qc(c,d)?"2.0":"1.0";return gf(f,g)},lf=function(a,b,c,d,e,f,g){var h=wc(d),i=l(c)?c:c.results,j=d?{type:h}:{};j.properties=e.properties;var k,m,n=hf(a,b,h?d:null);for(k=0,m=i.length;m>k;k++){var o=i[k],p=of(a,"element",o,j,f,g);pb(n,p.element)}return gf(n,"3.0")},mf=function(a,b,c,d,e,f,g){var h=hf(a,b,d),i=e.properties||{},j=Qc(d,g)||{},k="1.0";for(var l in c)if("__metadata"!==l){var m=c[l],n=Nc(j.property,l),o=i[l]||{},p=of(a,l,m,o,n,g);k=$c(k,p.dsv),pb(h,p.element)}return gf(h,k)},nf=function(a,b,c,d,e){var f=bf(c,d),g=he(a,c,f,e),h=hf(a,b,d,g);return gf(h,"3.0")},of=function(a,b,c,d,e,f){var g=Bb(c,d,e);if(Kc(c))return jf(a,b,c,g||Qb);var h=Hc(g);if(h||Ic(g))return nf(a,b,c,g,h);if(Ac(c,g))return lf(a,b,c,g,d,e,f);if(Jc(c))return null;var i=Mc(c,e);return null!==i?null:null===c?kf(a,b,g):mf(a,b,c,g,d,e,f)},pf=function(a){if(a&&n(a)){var b=nb();return pb(b,ef(b,"uri",a.uri))}},qf=function(a,b){if(b){var c=W(b),d=eb(c);if(d)return $e(d)}},rf=function(a,c,d){var e=d.contentType=d.contentType||xd(ye);return e&&e.mediaType===ye?wb(pf(c)):b};d.xmlHandler=Jd(qf,rf,ye,wd);var sf="a",tf=I+"2005/Atom",uf=I+"2007/app",vf=Ae+"/edit-media/",wf=Ae+"/mediaresource/",xf=Ae+"/relatedlinks/",yf=["application/atom+xml","application/atomsvc+xml","application/xml"],zf=yf[0],Af=[tf,uf,L,K],Bf={SyndicationAuthorEmail:"author/email",SyndicationAuthorName:"author/name",SyndicationAuthorUri:"author/uri",SyndicationContributorEmail:"contributor/email",SyndicationContributorName:"contributor/name",SyndicationContributorUri:"contributor/uri",SyndicationPublished:"published",SyndicationRights:"rights",SyndicationSummary:"summary",SyndicationTitle:"title",SyndicationUpdated:"updated"},Cf=function(a){return Bf[a]||a},Df=function(a){return!g(Af,a)},Ef=function(a,b,c,d,e){e=e||"";var f=a["FC_TargetPath"+e];if(!f)return null;var g=a["FC_SourcePath"+e],h=Cf(f),i=d?d+(g?"/"+g:""):g,j=i&&Sf(c,b,i),k=a["FC_NsUri"+e]||null,l=a["FC_NsPrefix"+e]||null,m=a["FC_KeepInContent"+e]||"";return f!==h&&(k=tf,l=sf),{contentKind:a["FC_ContentKind"+e],keepInContent:"true"===m.toLowerCase(),nsPrefix:l,nsURI:k,propertyPath:i,propertyType:j,entryPath:h}},Ff=function(a,b,c){for(var d=[];a;){var e=(a.FC_SourcePath,Ef(a,a,b));e&&c(e);var f,g,h=a.property||[];for(f=0,g=h.length;g>f;f++)for(var i=h[f],j=0,k="";e=Ef(i,a,b,i.name,k);)c(e),j++,k="_"+j;a=Rc(a.baseType,b)}return d},Gf=function(a){var b=[];return Z(a,function(a){var c=jb(a);Df(c)&&b.push(Oe(a,!0))}),b},Hf=function(a){return Pe(a,!0)},If=function(a,b,c){var d=jb(a),e=ib(a);if(d===uf&&"service"===e)return dg(a,b);if(d===tf){if("feed"===e)return Mf(a,b,c);if("entry"===e)return Tf(a,b,c)}},Jf=function(a,b){var c=[],d={extensions:c};return Z(a,function(e){var f=ib(e),g=jb(e),h=kb(e);if(null===g){if("title"===f||"metadata"===f)return void(d[f]=h);if("target"===f)return void(d.target=A(h,ab(a,b)))}Df(g)&&c.push(Oe(e,!0))}),d},Kf=function(a,b,c){var d=c.actions=c.actions||[];d.push(Jf(a,b))},Lf=function(a,b,c){var d=c.functions=c.functions||[];d.push(Jf(a,b))},Mf=function(a,b,c){var d=Gf(a),e={feed_extensions:d},f=[],g={__metadata:e,results:f};return b=ab(a,b),bb(a,function(a){var h=jb(a),i=ib(a);if(h===Je){if("count"===i)return void(g.__count=parseInt(hb(a),10));if("action"===i)return void Kf(a,b,e);if("function"===i)return void Lf(a,b,e)}return Df(h)?void d.push(Pe(a)):"entry"===i?void f.push(Tf(a,b,c)):"link"===i?void Nf(a,g,b):"id"===i?(e.uri=A(hb(a),b),void(e.uri_extensions=Gf(a))):"title"===i?(e.title=hb(a)||"",void(e.title_extensions=Gf(a))):void 0
}),g},Nf=function(a,b,c){var d=Of(a,c),e=d.href,f=d.rel,g=d.extensions,h=b.__metadata;return"next"===f?(b.__next=e,void(h.next_extensions=g)):"self"===f?(h.self=e,void(h.self_extensions=g)):void 0},Of=function(a,b){b=ab(a,b);var c=[],d={extensions:c,baseURI:b};if(Z(a,function(a){var e=jb(a),f=ib(a),g=a.value;return"href"===f?void(d.href=A(g,b)):"type"===f||"rel"===f?void(d[f]=g):void(Df(e)&&c.push(Oe(a,!0)))}),!d.href)throw{error:"href attribute missing on link element",element:a};return d},Pf=function(a,c){if(-1===a.indexOf("/"))return c[a];var d,e,f=a.split("/");for(d=0,e=f.length;e>d;d++){if(null===c)return b;if(c=c[f[d]],c===b)return c}return c},Qf=function(a,c,d,e){var f;if(-1===a.indexOf("/"))c[a]=d,f=a;else{var g,h,i=a.split("/");for(g=0,h=i.length-1;h>g;g++){var j=c[i[g]];if(j===b)j={},c[i[g]]=j;else if(null===j)return;c=j}f=i[g],c[f]=d}if(e){var k=c.__metadata=c.__metadata||{},l=k.properties=k.properties||{},m=l[f]=l[f]||{};m.type=e}},Rf=function(a,b,c){var d=a.propertyPath;if(!a.keepInContent&&null!==Pf(d,c)){var e=db(b,a.nsURI,a.entryPath);if(e){var f,g=a.propertyType;f="xhtml"===a.contentKind?xb(e):Xe(e,g||"Edm.String"),Qf(d,c,f,g)}}},Sf=function(a,b,c){for(var d,e,f=c.split("/");b;){var g=b;for(d=0,e=f.length;e>d;d++){var h=g.property;if(!h)break;var i=Nc(h,f[d]);if(!i)break;var j=i.type;if(!j||Lc(j))return j||null;if(g=Qc(j,a),!g)return null}b=Rc(b.baseType,a)}return null},Tf=function(a,b,c){var d={},e={__metadata:d},f=$(a,"etag",Je);f&&(d.etag=f),b=ab(a,b),bb(a,function(a){var f=jb(a),g=ib(a);if(f!==tf){if(f===Je){if("properties"===g)return void cg(a,e,d);if("action"===g)return void Kf(a,b,d);if("function"===g)return void Lf(a,b,d)}}else{if("id"===g)return void Uf(a,d,b);if("category"===g)return void Vf(a,d);if("content"===g)return void Wf(a,e,d,b);if("link"===g)return void Xf(a,e,d,b,c)}});var g=Rc(d.type,c);return Ff(g,c,function(b){Rf(b,a,e)}),e},Uf=function(a,b,c){b.uri=A(hb(a),ab(a,c)),b.uri_extensions=Gf(a)},Vf=function(a,b){if($(a,"scheme")===Le){if(b.type)throw{message:"Invalid AtomPub document: multiple category elements defining the entry type were encounterd withing an entry",element:a};var c=[];Z(a,function(a){var b=jb(a),d=ib(a);return b?void(Df(b)&&c.push(Oe(a,!0))):void("scheme"!==d&&"term"!==d&&c.push(Oe(a,!0)))}),b.type=$(a,"term"),b.type_extensions=c}},Wf=function(a,b,c,d){var e=$(a,"src"),f=$(a,"type");if(e){if(!f)throw{message:"Invalid AtomPub document: content element must specify the type attribute if the src attribute is also specified",element:a};c.media_src=A(e,ab(a,d)),c.content_type=f}bb(a,function(d){if(e)throw{message:"Invalid AtomPub document: content element must not have child elements if the src attribute is specified",element:a};jb(d)===Je&&"properties"===ib(d)&&cg(d,b,c)})},Xf=function(a,b,c,d,e){var f=Of(a,d),g=f.rel,h=f.href,i=f.extensions;return"self"===g?(c.self=h,void(c.self_link_extensions=i)):"edit"===g?(c.edit=h,void(c.edit_link_extensions=i)):"edit-media"===g?(c.edit_media=f.href,c.edit_media_extensions=i,void bg(f,c)):0===g.indexOf(vf)?void $f(f,b,c):0===g.indexOf(wf)?void _f(f,b,c):0===g.indexOf(Ke)?void Zf(a,f,b,c,e):0===g.indexOf(xf)?void Yf(f,c):void 0},Yf=function(a,b){var c=a.rel.substring(xf.length);b.properties=b.properties||{};var d=b.properties[c]=b.properties[c]||{};d.associationuri=a.href,d.associationuri_extensions=a.extensions},Zf=function(a,b,c,d,e){var f,g=eb(a,Je,"inline");if(g){var h=eb(g),i=ab(g,b.baseURI);f=h?If(h,i,e):null}else f={__deferred:{uri:b.href}};var j=b.rel.substring(Ke.length);c[j]=f,d.properties=d.properties||{};var k=d.properties[j]=d.properties[j]||{};k.extensions=b.extensions},$f=function(a,b,c){var d=a.rel.substring(vf.length),e=ag(d,b,c),f=e.value,g=e.metadata,h=a.href;f.edit_media=h,f.content_type=a.type,g.edit_media_extensions=a.extensions,f.media_src=f.media_src||h,g.media_src_extensions=g.media_src_extensions||[],bg(a,f)},_f=function(a,b,c){var d=a.rel.substring(wf.length),e=ag(d,b,c),f=e.value,g=e.metadata;f.media_src=a.href,g.media_src_extensions=a.extensions,f.content_type=a.type},ag=function(a,b,c){c.properties=c.properties||{};var d=c.properties[a],e=b[a]&&b[a].__mediaresource;return e||(e={},b[a]={__mediaresource:e},c.properties[a]=d={}),{value:e,metadata:d}},bg=function(a,b){var c,d,e=a.extensions;for(c=0,d=e.length;d>c;c++)if(e[c].namespaceURI===Je&&"etag"===e[c].name)return b.media_etag=e[c].value,void e.splice(c,1)},cg=function(a,b,c){bb(a,function(a){var d=Ue(a);if(d){var e=d.name,f=c.properties=c.properties||{};f[e]=d.metadata,b[e]=d.value}})},dg=function(a,b){var c=[],d=[];if(b=ab(a,b),bb(a,function(a){return jb(a)===uf&&"workspace"===ib(a)?void c.push(eg(a,b)):void d.push(Pe(a))}),0===c.length)throw{message:"Invalid AtomPub service document: No workspace element found.",element:a};return{workspaces:c,extensions:d}},eg=function(a,c){var d,e=[],f=[];return c=ab(a,c),bb(a,function(a){var g=jb(a),h=ib(a);if(g===tf&&"title"===h){if(d!==b)throw{message:"Invalid AtomPub service document: workspace has more than one child title element",element:a};return void(d=hb(a))}return g===uf?void("collection"===h&&e.push(fg(a,c))):void f.push(Hf(a))}),{title:d||"",collections:e,extensions:f}},fg=function(a,c){var d=$(a,"href");if(!d)throw{message:"Invalid AtomPub service document: collection has no href attribute",element:a};c=ab(a,c),d=A(d,ab(a,c));var e,f=[];if(bb(a,function(c){var d=jb(c),g=ib(c);if(d!==tf)d!==uf&&f.push(Hf(a));else if("title"===g){if(e!==b)throw{message:"Invalid AtomPub service document: collection has more than one child title element",element:c};e=hb(c)}}),!e)throw{message:"Invalid AtomPub service document: collection has no title element",element:a};return{title:e,href:d,extensions:f}},gg=function(a,b,c){return rb(a,tf,X(sf,b),c)},hg=function(a,b,c){return qb(a,null,b,c)},ig=function(a){if(a.childNodes.length>0)return!1;var b,c,d=!0,e=a.attributes;for(b=0,c=e.length;c>b&&d;b++){var f=e[b];d=d&&Q(f)||jb(f)==Je&&"type"===ib(f)}return d},jg=function(a,b,c,d,e){var f=null,g=null,h=null,i="";"deferred"!==c?(f=hg(a,"type","application/atom+xml;type="+c),g=cf(a,"inline"),d&&(i=d.__metadata&&d.__metadata.uri||"",h=ng(a,d,e)||mg(a,d,e),pb(g,h.element))):i=d.__deferred.uri;var j=gg(a,"link",[hg(a,"href",i),hg(a,"rel",A(b,Ke)),f,g]);return gf(j,h?h.dsv:"1.0")},kg=function(a,b,c,d,e,f){if(Jc(c))return null;var g=of(a,b,c,d,e,f);if(!g){var h=Mc(c,e);g=jg(a,b,h,c,f)}return g},lg=function(a,b,c,d){var e,f=cb(c,Ie,d.propertyPath),g=f&&_(f,"null",Je),h="1.0";if(g&&"true"===g.value)return h;if(f&&(e=hb(f)||"",!d.keepInContent)){h="2.0";var i=f.parentNode,j=i;for(i.removeChild(f);j!==c&&ig(j);)i=j.parentNode,i.removeChild(j),j=i}var k=vb(a,b,d.nsURI,d.nsPrefix,d.entryPath);if(2===k.nodeType)return k.value=e,h;var l=d.contentKind;return ob(k,[l&&qb(a,null,"type",l),"xhtml"===l?tb(a,e):e]),h},mg=function(a,b,c){var d=b.__metadata||{},e=d.properties||{},f=d.etag,g=d.uri,h=d.type,i=Rc(h,c),j=cf(a,"properties"),k=gg(a,"entry",[gg(a,"author",gg(a,"name")),f&&df(a,"etag",f),g&&gg(a,"id",g),h&&gg(a,"category",[hg(a,"term",h),hg(a,"scheme",Le)]),gg(a,"content",[hg(a,"type","application/xml"),j])]),l="1.0";for(var m in b)if("__metadata"!==m){var n=e[m]||{},o=i&&(Nc(i.property,m)||Nc(i.navigationProperty,m)),p=kg(a,m,b[m],n,o,c);if(p){var q=p.element,r=jb(q)===tf?k:j;pb(r,q),l=$c(l,p.dsv)}}return Ff(i,c,function(b){var c=lg(a,k,j,b);l=$c(l,c)}),gf(k,l)},ng=function(a,b,c){var d=l(b)?b:b.results;if(!d)return null;var e,f,g="1.0",h=gg(a,"feed");for(e=0,f=d.length;f>e;e++){var i=mg(a,d[e],c);pb(h,i.element),g=$c(g,i.dsv)}return gf(h,g)},og=function(a,b){if(a){var c=Gc(a)&&ng||n(a)&&mg;if(c){var d=nb(),e=c(d,a,b);if(e){var f=e.element;return ob(f,[sb(d,Je,Ne),sb(d,Ie,Me)]),gf(pb(d,f),e.dsv)}}}return null},pg=function(a,b,c){if(b){var d=W(b),e=eb(d);if(e)return If(e,null,c.metadata)}},qg=function(a,b,c){var d=c.contentType=c.contentType||xd(zf);if(d&&d.mediaType===zf){var e=og(b,c.metadata);if(e)return c.dataServiceVersion=$c(c.dataServiceVersion||"1.0",e.dsv),wb(e.element)}};d.atomHandler=Jd(pg,qg,yf.join(","),wd);var rg=function(a,b,c,d){return{attributes:a,elements:b,text:c||!1,ns:d}},sg={elements:{Annotations:rg(["Target","Qualifier"],["TypeAnnotation*","ValueAnnotation*"]),Association:rg(["Name"],["End*","ReferentialConstraint","TypeAnnotation*","ValueAnnotation*"]),AssociationSet:rg(["Name","Association"],["End*","TypeAnnotation*","ValueAnnotation*"]),Binary:rg(null,null,!0),Bool:rg(null,null,!0),Collection:rg(null,["String*","Int*","Float*","Decimal*","Bool*","DateTime*","DateTimeOffset*","Guid*","Binary*","Time*","Collection*","Record*"]),CollectionType:rg(["ElementType","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"],["CollectionType","ReferenceType","RowType","TypeRef"]),ComplexType:rg(["Name","BaseType","Abstract"],["Property*","TypeAnnotation*","ValueAnnotation*"]),DateTime:rg(null,null,!0),DateTimeOffset:rg(null,null,!0),Decimal:rg(null,null,!0),DefiningExpression:rg(null,null,!0),Dependent:rg(["Role"],["PropertyRef*"]),Documentation:rg(null,null,!0),End:rg(["Type","Role","Multiplicity","EntitySet"],["OnDelete"]),EntityContainer:rg(["Name","Extends"],["EntitySet*","AssociationSet*","FunctionImport*","TypeAnnotation*","ValueAnnotation*"]),EntitySet:rg(["Name","EntityType"],["TypeAnnotation*","ValueAnnotation*"]),EntityType:rg(["Name","BaseType","Abstract","OpenType"],["Key","Property*","NavigationProperty*","TypeAnnotation*","ValueAnnotation*"]),EnumType:rg(["Name","UnderlyingType","IsFlags"],["Member*"]),Float:rg(null,null,!0),Function:rg(["Name","ReturnType"],["Parameter*","DefiningExpression","ReturnType","TypeAnnotation*","ValueAnnotation*"]),FunctionImport:rg(["Name","ReturnType","EntitySet","IsSideEffecting","IsComposable","IsBindable","EntitySetPath"],["Parameter*","ReturnType","TypeAnnotation*","ValueAnnotation*"]),Guid:rg(null,null,!0),Int:rg(null,null,!0),Key:rg(null,["PropertyRef*"]),LabeledElement:rg(["Name"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),Member:rg(["Name","Value"]),NavigationProperty:rg(["Name","Relationship","ToRole","FromRole","ContainsTarget"],["TypeAnnotation*","ValueAnnotation*"]),Null:rg(null,null),OnDelete:rg(["Action"]),Path:rg(null,null,!0),Parameter:rg(["Name","Type","Mode","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","SRID"],["CollectionType","ReferenceType","RowType","TypeRef","TypeAnnotation*","ValueAnnotation*"]),Principal:rg(["Role"],["PropertyRef*"]),Property:rg(["Name","Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","CollectionKind","SRID"],["CollectionType","ReferenceType","RowType","TypeAnnotation*","ValueAnnotation*"]),PropertyRef:rg(["Name"]),PropertyValue:rg(["Property","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ReferenceType:rg(["Type"]),ReferentialConstraint:rg(null,["Principal","Dependent"]),ReturnType:rg(["ReturnType","Type","EntitySet"],["CollectionType","ReferenceType","RowType"]),RowType:rg(["Property*"]),String:rg(null,null,!0),Schema:rg(["Namespace","Alias"],["Using*","EntityContainer*","EntityType*","Association*","ComplexType*","Function*","ValueTerm*","Annotations*"]),Time:rg(null,null,!0),TypeAnnotation:rg(["Term","Qualifier"],["PropertyValue*"]),TypeRef:rg(["Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"]),Using:rg(["Namespace","Alias"]),ValueAnnotation:rg(["Term","Qualifier","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ValueTerm:rg(["Name","Type"],["TypeAnnotation*","ValueAnnotation*"]),Edmx:rg(["Version"],["DataServices","Reference*","AnnotationsReference*"],!1,Be),DataServices:rg(null,["Schema*"],!1,Be)}},tg=["m:FC_ContentKind","m:FC_KeepInContent","m:FC_NsPrefix","m:FC_NsUri","m:FC_SourcePath","m:FC_TargetPath"];sg.elements.Property.attributes=sg.elements.Property.attributes.concat(tg),sg.elements.EntityType.attributes=sg.elements.EntityType.attributes.concat(tg),sg.elements.Edmx={attributes:["Version"],elements:["DataServices"],ns:Be},sg.elements.DataServices={elements:["Schema*"],ns:Be},sg.elements.EntityContainer.attributes.push("m:IsDefaultEntityContainer"),sg.elements.Property.attributes.push("m:MimeType"),sg.elements.FunctionImport.attributes.push("m:HttpMethod"),sg.elements.FunctionImport.attributes.push("m:IsAlwaysBindable"),sg.elements.EntityType.attributes.push("m:HasStream"),sg.elements.DataServices.attributes=["m:DataServiceVersion","m:MaxDataServiceVersion"];var ug=function(a){if(!a)return a;if(a.length>1){var b=a.substr(0,2);return b===b.toUpperCase()?a:a.charAt(0).toLowerCase()+a.substr(1)}return a.charAt(0).toLowerCase()},vg=function(a,b){if("Documentation"===b)return{isArray:!0,propertyName:"documentation"};var c=a.elements;if(!c)return null;var d,e;for(d=0,e=c.length;e>d;d++){var f=c[d],g=!1;if("*"===f.charAt(f.length-1)&&(g=!0,f=f.substr(0,f.length-1)),b===f){var h=ug(f);return{isArray:g,propertyName:h}}}return null},wg=/^(m:FC_.*)_[0-9]+$/,xg=function(a){return a===Ce||a===De||a===Ee||a===Fe||a===Ge||a===He},yg=function(a){var b=ib(a),c=jb(a),d=sg.elements[b];if(!d)return null;if(d.ns){if(c!==d.ns)return null}else if(!xg(c))return null;var e={},f=[],h=d.attributes||[];return Z(a,function(a){var b=ib(a),c=jb(a),d=a.value;if(c!==K){var i=null,j=!1;if(xg(c)||null===c?i="":c===Je&&(i="m:"),null!==i){i+=b;var k=wg.exec(i);k&&(i=k[1]),g(h,i)&&(j=!0,e[ug(b)]=d)}j||f.push(Oe(a))}}),bb(a,function(a){var b=ib(a),c=vg(d,b);if(c)if(c.isArray){var g=e[c.propertyName];g||(g=[],e[c.propertyName]=g),g.push(yg(a))}else e[c.propertyName]=yg(a);else f.push(Pe(a))}),d.text&&(e.text=hb(a)),f.length&&(e.extensions=f),e},zg=function(a,c){var d=W(c),e=eb(d);return yg(e)||b};d.metadataHandler=Jd(zg,null,ye,wd);var Ag="o",Bg="f",Cg="p",Dg="c",Eg="s",Fg="l",Gg="odata",Hg=Gg+".",Ig="@"+Hg+"bind",Jg=Hg+"metadata",Kg=Hg+"navigationLinkUrl",Lg=Hg+"type",Mg={readLink:"self",editLink:"edit",nextLink:"__next",mediaReadLink:"media_src",mediaEditLink:"edit_media",mediaContentType:"content_type",mediaETag:"media_etag",count:"__count",media_src:"mediaReadLink",edit_media:"mediaEditLink",content_type:"mediaContentType",media_etag:"mediaETag",url:"uri"},Ng={metadata:"odata.metadata",count:"odata.count",next:"odata.nextLink",id:"odata.id",etag:"odata.etag",read:"odata.readLink",edit:"odata.editLink",mediaRead:"odata.mediaReadLink",mediaEdit:"odata.mediaEditLink",mediaEtag:"odata.mediaETag",mediaContentType:"odata.mediaContentType",actions:"odata.actions",functions:"odata.functions",navigationUrl:"odata.navigationLinkUrl",associationUrl:"odata.associationLinkUrl",type:"odata.type"},Og=function(a){if(a.indexOf(".")>0){var b=a.indexOf("@"),c=b>-1?a.substring(0,b):null,d=a.substring(b+1);return{target:c,name:d,isOData:0===d.indexOf(Hg)}}return null},Pg=function(a,b,c,d,e){return Cc(b)&&b[Lg]||c&&c[a+"@"+Lg]||d&&d.type||Vc(d,e)||null},Qg=function(a,b){return b?Nc(b.property,a)||Nc(b.navigationProperty,a):null},Rg=function(a){return Cc(a)&&Hg+"id"in a},Sg=function(a,b,c){if(b[a+"@"+Kg]||c&&c.relationship)return!0;var d=l(b[a])?b[a][0]:b[a];return Rg(d)},Tg=function(a){return Lc(a)||Hc(a)||Ic(a)},Ug=function(a,b,c,d,e){for(var f in a)if(f.indexOf(".")>0&&"#"!==f.charAt(0)){var g=Og(f);if(g){var h=g.name,i=g.target,j=null,k=null;i&&(j=Qg(i,d),k=Pg(i,a[i],a,j,e)),g.isOData?Vg(h,i,k,a[f],a,b,c):b[f]=a[f]}}return b},Vg=function(a,b,c,d,e,f,g){var h=a.substring(Hg.length);switch(h){case"navigationLinkUrl":return void Zg(h,b,c,d,e,f,g);case"nextLink":case"count":return void Xg(h,b,d,f,g);case"mediaReadLink":case"mediaEditLink":case"mediaContentType":case"mediaETag":return void Yg(h,b,c,d,f,g);default:return void Wg(h,b,d,f,g)}},Wg=function(a,b,c,d,e){var f=d.__metadata=d.__metadata||{},g=Mg[a]||a;if("editLink"===a)return f.uri=A(c,e),void(f[g]=f.uri);if(("readLink"===a||"associationLinkUrl"===a)&&(c=A(c,e)),b){var h=f.properties=f.properties||{},i=h[b]=h[b]||{};return"type"===a?void(i[g]=i[g]||c):void(i[g]=c)}f[g]=c},Xg=function(a,b,c,d,e){var f=Mg[a],g=b?d[b]:d;g[f]="nextLink"===a?A(c,e):c},Yg=function(a,b,c,d,e,f){var g=e.__metadata=e.__metadata||{},h=Mg[a];if(("mediaReadLink"===a||"mediaEditLink"===a)&&(d=A(d,f)),b){var i=g.properties=g.properties||{},j=i[b]=i[b]||{};return j.type=j.type||c,e.__metadata=g,e[b]=e[b]||{__mediaresource:{}},void(e[b].__mediaresource[h]=d)}g[h]=d},Zg=function(a,b,c,d,e,f,g){var h=f.__metadata=f.__metadata||{},i=h.properties=h.properties||{},j=i[b]=i[b]||{},k=A(d,g);return e.hasOwnProperty(b)?void(j.navigationLinkUrl=k):(f[b]={__deferred:{uri:k}},void(j.type=j.type||c))},$g=function(a,b,c,d,e,f,g){if("string"==typeof a)return _g(a,b,g);if(!Tg(b)){if(l(a))return ah(a,b,c,d,f,g);if(Cc(a))return bh(a,b,c,d,f,g)}return a},_g=function(a,b,c){switch(b){case Rb:return hd(a);case Gb:return ed(a,!1);case Hb:return fd(a,!1)}return c?ed(a,!0)||fd(a,!0)||a:a},ah=function(a,b,c,d,e,f){var g,h,i=wc(b),j=[],k=[];for(g=0,h=a.length;h>g;g++){var l=Pg(null,a[g])||i,m={type:l},n=$g(a[g],l,m,d,null,e,f);Tg(l)||Kc(a[g])||j.push(m),k.push(n)}return j.length>0&&(c.elements=j),{__metadata:{type:b},results:k}},bh=function(a,b,c,d,e,f){var g=dh(a,{type:b},d,e,f),h=g.__metadata,i=h.properties;return i&&(c.properties=i,delete h.properties),g},ch=function(a,b,c,d,e){return l(a)?fh(a,b,c,d,e):Cc(a)?dh(a,b,c,d,e):null},dh=function(a,c,d,e,f){c=c||{};var g=a[Lg]||c.type||null,h=Rc(g,e),i=!0;h||(i=!1,h=Qc(g,e));var j,k={type:g},l={__metadata:k},m={};if(i&&h&&c.entitySet&&"minimalmetadata"==c.contentTypeOdata){var n=d.substring(0,d.lastIndexOf("$metadata"));for(j=null,h.key||(j=h);j&&!j.key&&j.baseType;)j=Rc(j.baseType,e);if(h.key||j&&j.key){var o;if(o=h.key?gh(a,h):gh(a,j)){var p={key:o,entitySet:c.entitySet,functionImport:c.functionImport,containerName:c.containerName};hh(a,p,g,n,h,j)}}}for(var q in a)if(0===q.indexOf("#"))eh(q.substring(1),a[q],l,d,e);else if(-1===q.indexOf(".")){k.properties||(k.properties=m);var r=a[q],s=s=Qg(q,h);for(j=h;h&&null===s&&j.baseType;)j=Rc(j.baseType,e),s=s=Qg(q,j);var t=Sg(q,a,s),u=Pg(q,r,a,s,e),v=m[q]=m[q]||{type:u};if(t){var w={};if(c.entitySet!==b){var x=Wc(s,c.entitySet.name,e);w=Xc(x,e)}w.contentTypeOdata=c.contentTypeOdata,w.kind=c.kind,w.type=u,l[q]=ch(r,w,d,e,f)}else l[q]=$g(r,u,v,d,s,e,f)}return Ug(a,l,d,h,e)},eh=function(a,b,c,d,e){if(a&&(l(b)||Cc(b))){var f=!1,g=a.lastIndexOf("."),h=a.substring(g+1),i=g>-1?a.substring(0,g):"",j=h===a||-1===i.indexOf(".")?Sc(e):Tc(i,e);if(j){var k=Uc(j.functionImport,h);k&&k.isSideEffecting&&(f=!bd(k.isSideEffecting))}var m,n,o=c.__metadata,p=f?"functions":"actions",q=A(a,d),r=l(b)?b:[b];for(m=0,n=r.length;n>m;m++){var s=r[m];if(s){var t=o[p]=o[p]||[],u={metadata:q,title:s.title,target:A(s.target,d)};t.push(u)}}}},fh=function(a,b,c,d,e){var f,g,h,i=l(a)?a:a.value,j=[];for(f=0,g=i.length;g>f;f++)h=dh(i[f],b,c,d,e),j.push(h);var k={results:j};if(Cc(a)){for(var m in a)0===m.indexOf("#")&&(k.__metadata=k.__metadata||{},eh(m.substring(1),a[m],k,c,d));k=Ug(a,k,c)}return k},gh=function(a,b){var c,d,e=b.key.propertyRef;if(c="(",1==e.length)d=Nc(b.property,e[0].name).type,c+=lh(a[e[0].name],d);else for(var f=!0,g=0;g<e.length;g++)f?f=!1:c+=",",d=Nc(b.property,e[g].name).type,c+=e[g].name+"="+lh(a[e[g].name],d);return c+=")"},hh=function(a,b,c,d,e,f){var g=a[Ng.id]||a[Ng.read]||a[Ng.edit]||b.entitySet.name+b.key;if(a[Ng.id]=d+g,a[Ng.edit]||(a[Ng.edit]=b.entitySet.name+b.key,b.entitySet.entityType!=c&&(a[Ng.edit]+="/"+c)),a[Ng.read]=a[Ng.read]||a[Ng.edit],!a[Ng.etag]){var h=ih(a,e,f);h&&(a[Ng.etag]=h)}oh(a,e,f),kh(a,e,f),nh(a,b)},ih=function(a,b,c){for(var d,e="",f=0;b.property&&f<b.property.length;f++)d=b.property[f],e=jh(a,e,d);if(c)for(f=0;c.property&&f<c.property.length;f++)d=c.property[f],e=jh(a,e,d);return e.length>0?e+'"':null},jh=function(a,b,c){return"Fixed"==c.concurrencyMode&&(b+=b.length>0?",":'W/"',b+=null!==a[c.name]?lh(a[c.name],c.type):"null"),b},kh=function(a,c,d){for(var e,f,g,h="@odata.navigationLinkUrl",i="@odata.associationLinkUrl",j=0;c.navigationProperty&&j<c.navigationProperty.length;j++)e=c.navigationProperty[j].name,f=e+h,a[f]===b&&(a[f]=a[Ng.edit]+"/"+encodeURIComponent(e)),g=e+i,a[g]===b&&(a[g]=a[Ng.edit]+"/$links/"+encodeURIComponent(e));if(d&&d.navigationProperty)for(j=0;j<d.navigationProperty.length;j++)e=d.navigationProperty[j].name,f=e+h,a[f]===b&&(a[f]=a[Ng.edit]+"/"+encodeURIComponent(e)),g=e+i,a[g]===b&&(a[g]=a[Ng.edit]+"/$links/"+encodeURIComponent(e))},lh=function(a,b){switch(a=""+mh(a,b),a=encodeURIComponent(a.replace("'","''")),b){case"Edm.Binary":return"X'"+a+"'";case"Edm.DateTime":return"datetime'"+a+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+a+"'";case"Edm.Decimal":return a+"M";case"Edm.Guid":return"guid'"+a+"'";case"Edm.Int64":return a+"L";case"Edm.Float":return a+"f";case"Edm.Double":return a+"D";case"Edm.Geography":return"geography'"+a+"'";case"Edm.Geometry":return"geometry'"+a+"'";case"Edm.Time":return"time'"+a+"'";case"Edm.String":return"'"+a+"'";default:return a}},mh=function(a,b){switch(b){case"Edm.Binary":return D(a);default:return a}},nh=function(a,c){for(var d=c.functionImport||[],e=0;e<d.length;e++)if(d[e].isBindable&&d[e].parameter[0]&&d[e].parameter[0].type==c.entitySet.entityType){var f="#"+c.containerName+"."+d[e].name;a[f]==b&&(a[f]={title:d[e].name,target:a[Ng.edit]+"/"+d[e].name})}},oh=function(a,b,c){(b.hasStream||c&&c.hasStream)&&(a[Ng.mediaEdit]=a[Ng.mediaEdit]||a[Ng.mediaEdit]+"/$value",a[Ng.mediaRead]=a[Ng.mediaRead]||a[Ng.mediaEdit])},ph=function(a,b,c,d){var e={type:b},f=$g(a.value,b,e,c,null,null,d);return Ug(a,{__metadata:e,value:f},c)},qh=function(a,b,c,d,e){var f={},g=ah(a.value,b,f,c,d,e);return j(g.__metadata,f),Ug(a,g,c)},rh=function(a,b){var c=a.value;if(!l(c))return sh(a,b);var d,e,f=[];for(d=0,e=c.length;e>d;d++)f.push(sh(c[d],b));var g={results:f};return Ug(a,g,b)},sh=function(a,b){var c={uri:A(a.url,b)};c=Ug(a,c,b);var d=c.__metadata||{},e=d.properties||{};return th(e.url),p(e,"url","uri"),c},th=function(a){a&&delete a.type},uh=function(a,b){var c=a.value,d=[],e=Ug(a,{collections:d},b),f=e.__metadata||{},g=f.properties||{};th(g.value),p(g,"value","collections");var h,i;for(h=0,i=c.length;i>h;h++){var j=c[h],k={title:j.name,href:A(j.url,b)};k=Ug(j,k,b),f=k.__metadata||{},g=f.properties||{},th(g.name),th(g.url),p(g,"name","title"),p(g,"url","href"),d.push(k)}return{workspaces:[e]}},vh=function(a,b){return{kind:a,type:b||null}},wh=function(a,b,c){var d=a[Jg];if(!d||"string"!=typeof d)return null;var e=d.lastIndexOf("#");if(-1===e)return vh(Eg);var f=d.indexOf("@Element",e),g=f-1;0>g&&(g=d.indexOf("?",e),-1===g&&(g=d.length));var h=d.substring(e+1,g);if(h.indexOf("/$links/")>0)return vh(Fg);var i=h.split("/");if(i.length>=0){var j=i[0],k=i[1];if(Tg(j))return vh(Cg,j);if(Bc(j))return vh(Dg,j);var m,n,o,p=k;if(!k){var q=j.lastIndexOf("."),r=j.substring(q+1),s=r===j?Sc(b):Tc(j.substring(0,q),b);s&&(m=Pc(s.entitySet,r),n=s.functionImport,o=s.name,p=m?m.entityType:null)}var t;if(f>0)return t=vh(Ag,p),t.entitySet=m,t.functionImport=n,t.containerName=o,t;if(p)return t=vh(Bg,p),t.entitySet=m,t.functionImport=n,t.containerName=o,t;if(l(a.value)&&!Qc(j,b)){var u=a.value[0];if(!Kc(u)&&(Rg(u)||!c))return vh(Bg,null)}return vh(Ag,j)}return null},xh=function(a,b,c,d,e){if(!Cc(a))return a;e=e||"minimalmetadata";var g=a[Jg],h=wh(a,b,d);f(h)&&(h.contentTypeOdata=e);var i=null;if(h)switch(delete a[Jg],i=h.type,h.kind){case Bg:return fh(a,h,g,b,c);case Dg:return qh(a,i,g,b,c);case Cg:return ph(a,i,g,c);case Eg:return uh(a,g);case Fg:return rh(a,g)}return dh(a,h,g,b,c)},yh=["type","etag","media_src","edit_media","content_type","media_etag"],zh=function(a,b){var c=/\/\$links\//,d={},e=a.__metadata,f=b&&c.test(b.request.requestUri);return Bh(a,e&&e.properties,d,f),d},Ah=function(a,b){if(a){var c,d;for(c=0,d=yh.length;d>c;c++){var e=yh[c],f=Hg+(Mg[e]||e);Jh(f,null,a[e],b)}}},Bh=function(a,b,c,d){for(var e in a){var f=a[e];"__metadata"===e?Ah(f,c):-1===e.indexOf(".")?d&&"uri"===e?Dh(f,c):Ch(e,f,b,c,d):c[e]=f}},Ch=function(a,c,d,e){var f=d&&d[a]||{properties:b,type:b},g=Bb(c,f);return Kc(c)||!c?(Jh(Lg,a,g,e),void(e[a]=c)):Gc(c,g)||Fc(c)?void Gh(a,c,e):!g&&Ec(c)?void Eh(a,c,e):Ac(c,g)?(wc(g)&&Jh(Lg,a,g,e),void Fh(a,c,e)):(e[a]={},Jh(Lg,null,g,e[a]),void Bh(c,f.properties,e[a]))},Dh=function(a,b){b.url=a},Eh=function(a,b,c){Jh(Kg,a,b.__deferred.uri,c)},Fh=function(a,b,c){c[a]=[];var d=l(b)?b:b.results;Bh(d,null,c[a])},Gh=function(a,b,c){if(Gc(b)){c[a]=[];var d,e,f=l(b)?b:b.results;for(d=0,e=f.length;e>d;d++)Hh(a,f[d],!0,c)}else Hh(a,b,!1,c)},Hh=function(a,b,c,d){var e=b.__metadata&&b.__metadata.uri;if(e)return void Ih(a,e,c,d);var f=zh(b);return c?void d[a].push(f):void(d[a]=f)},Ih=function(a,b,c,d){var e=a+Ig;return c?(d[e]=d[e]||[],void d[e].push(b)):void(d[e]=b)},Jh=function(a,c,d,e){d!==b&&(c?e[c+"@"+a]=d:e[a]=d)},Kh="application/json",Lh=xd(Kh),Mh=function(a){var b=[];for(var c in a){var d,e;for(d=0,e=a[c].length;e>d;d++)b.push(j({metadata:c},a[c][d]))}return b},Nh=function(a,b,c,d){if(a&&"object"==typeof a){var e,f=a.__metadata;f&&(f.actions&&(f.actions=Mh(f.actions)),f.functions&&(f.functions=Mh(f.functions)),e=f&&f.type);var g,h=Rc(e,b)||Qc(e,b);if(h){var i=h.property;if(i){var j,k;for(j=0,k=i.length;k>j;j++){var l=i[j],m=l.name;if(g=a[m],"Edm.DateTime"===l.type||"Edm.DateTimeOffset"===l.type){if(g){if(g=c(g),!g)throw{message:"Invalid date/time value"};a[m]=g}}else"Edm.Time"===l.type&&(a[m]=hd(g))}}}else if(d)for(var n in a)g=a[n],"string"==typeof g&&(a[n]=c(g)||g)}return a},Oh=function(a){if(a){var b=a.properties.odata;return"nometadata"===b||"minimalmetadata"===b||"fullmetadata"===b}return!1},Ph=function(a,b){var c,d,e={collections:[]};for(c=0,d=a.EntitySets.length;d>c;c++){var f=a.EntitySets[c],g={title:f,href:A(f,b)};e.collections.push(g)}return{workspaces:[e]}},Qh=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,Rh=function(a){var b;0>a?(b="-",a=-a):b="+";var c=Math.floor(a/60);return a-=60*c,b+uc(c,2)+":"+uc(a,2)},Sh=function(a){var b=a&&Qh.exec(a);if(b){var c=new Date(o(b[1]));if(b[2]){var d=o(b[3]);"-"===b[2]&&(d=-d);var e=c.getUTCMinutes();c.setUTCMinutes(e-d),c.__edmType="Edm.DateTimeOffset",c.__offset=Rh(d)}if(!isNaN(c.valueOf()))return c}},Th=function(b,c,d){var e=h(d.recognizeDates,b.recognizeDates),f=h(d.inferJsonLightFeedAsObject,b.inferJsonLightFeedAsObject),g=d.metadata,i=d.dataServiceVersion,j=Sh,k="string"==typeof c?a.JSON.parse(c):c;if($c("3.0",i)===i){if(Oh(d.contentType))return xh(k,g,e,f,d.contentType.properties.odata);j=ed}return k=ld(k.d,function(a,b){return Nh(b,g,j,e)}),k=Yh(k,d.dataServiceVersion),Xh(k,d.response.requestUri)},Uh=function(b){var c,d=Date.prototype.toJSON;try{Date.prototype.toJSON=function(){return sc(this)},c=a.JSON.stringify(b,Wh)}finally{Date.prototype.toJSON=d}return c},Vh=function(a,c,d){var e=d.dataServiceVersion||"1.0",f=h(d.useJsonLight,a.useJsonLight),g=d.contentType=d.contentType||Lh;if(g&&g.mediaType===Lh.mediaType){var i=c;return f||Oh(g)?(d.dataServiceVersion=$c(e,"3.0"),i=zh(c,d),Uh(i)):($c("3.0",e)===e&&(g.properties.odata="verbose",d.contentType=g),Uh(i))}return b},Wh=function(a,b){return b&&"Edm.Time"===b.__edmType?tc(b):b},Xh=function(a,b){var c=Cc(a)&&!a.__metadata&&l(a.EntitySets);return c?Ph(a,b):a},Yh=function(a,b){return b&&b.lastIndexOf(";")===b.length-1&&(b=b.substr(0,b.length-1)),b&&"1.0"!==b||l(a)&&(a={results:a}),a},Zh=Jd(Th,Vh,Kh,wd);Zh.recognizeDates=!1,Zh.useJsonLight=!1,Zh.inferJsonLightFeedAsObject=!1,d.jsonHandler=Zh;var $h="multipart/mixed",_h=/^HTTP\/1\.\d (\d{3}) (.*)$/i,ai=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,bi=function(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)},ci=function(a){return a+bi()+"-"+bi()+"-"+bi()},di=function(a){return a.handler.partHandler},ei=function(a){var b=a.boundaries;return b[b.length-1]},fi=function(a,b,c){var d=c.contentType.properties.boundary;return{__batchResponses:hi(b,{boundaries:[d],handlerContext:c})}},gi=function(a,b,c){var d=c.contentType=c.contentType||xd($h);return d.mediaType===$h?mi(b,c):void 0},hi=function(a,b){var c="--"+ei(b);li(a,b,c),ki(a,b);for(var d,e=[];"--"!==d&&b.position<a.length;){var f,g=ii(a,b),h=xd(g["Content-Type"]);if(h&&h.mediaType===$h){b.boundaries.push(h.properties.boundary);try{f=hi(a,b)}catch(i){i.response=ji(a,b,c),f=[i]}e.push({__changeResponses:f}),b.boundaries.pop(),li(a,b,"--"+ei(b))}else{if(!h||"application/http"!==h.mediaType)throw{message:"invalid MIME part type "};ki(a,b);var j=ji(a,b,c);try{j.statusCode>=200&&j.statusCode<=299?di(b.handlerContext).read(j,b.handlerContext):j={message:"HTTP request failed",response:j}}catch(i){j=i}e.push(j)}d=a.substr(b.position,2),ki(a,b)}return e},ii=function(a,b){var c,d,e,f={};do e=b.position,d=ki(a,b),c=ai.exec(d),null!==c?f[c[1]]=c[2]:b.position=e;while(d&&c);return ad(f),f},ji=function(a,b,c){var d,e,f,g=b.position,h=_h.exec(ki(a,b));return h?(d=h[1],e=h[2],f=ii(a,b),ki(a,b)):b.position=g,{statusCode:d,statusText:e,headers:f,body:li(a,b,c)}},ki=function(a,b){return li(a,b,"\r\n")},li=function(a,b,c){var d=b.position||0,e=a.length;if(c){if(e=a.indexOf(c,d),-1===e)return null;b.position=e+c.length}else b.position=e;return a.substring(d,e)},mi=function(a,b){if(!yc(a))throw{message:"Data is not a batch object."};var c,d,e=ci("batch_"),f=a.__batchRequests,g="";for(c=0,d=f.length;d>c;c++)g+=ni(e,!1)+oi(f[c],b);g+=ni(e,!0);var h=b.contentType.properties;return h.boundary=e,g},ni=function(a,b){var c="\r\n--"+a;return b&&(c+="--"),c+"\r\n"},oi=function(a,b,c){var d,e=a.__changeRequests;if(l(e)){if(c)throw{message:"Not Supported: change set nested in other change set"};var f=ci("changeset_");d="Content-Type: "+$h+"; boundary="+f+"\r\n";var g,h;for(g=0,h=e.length;h>g;g++)d+=ni(f,!1)+oi(e[g],b,!0);d+=ni(f,!0)}else{d="Content-Type: application/http\r\nContent-Transfer-Encoding: binary\r\n\r\n";var i=j({},b);i.handler=Jd,i.request=a,i.contentType=null,jd(a,di(b),i),d+=pi(a)}return d},pi=function(a){var b=(a.method?a.method:"GET")+" "+a.requestUri+" HTTP/1.1\r\n";for(var c in a.headers)a.headers[c]&&(b=b+c+": "+a.headers[c]+"\r\n");return b+="\r\n",a.body&&(b+=a.body),b};d.batchHandler=Jd(fi,gi,$h,wd);var qi=[d.jsonHandler,d.atomHandler,d.xmlHandler,d.textHandler],ri=function(a,b,c){var d,e;for(d=0,e=qi.length;e>d&&!qi[d][a](b,c);d++);if(d===e)throw{message:"no handler for data"}};d.defaultSuccess=function(b){a.alert(a.JSON.stringify(b))},d.defaultError=q,d.defaultHandler={read:function(a,b){a&&f(a.body)&&a.headers["Content-Type"]&&ri("read",a,b)},write:function(a,b){ri("write",a,b)},maxDataServiceVersion:wd,accept:"application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7, application/json;q=0.5, */*;q=0.1"},d.defaultMetadata=[],d.read=function(a,b,c,e,f,g){var h;return h=a instanceof String||"string"==typeof a?{requestUri:a}:a,d.request(h,b,c,e,f,g)},d.request=function(a,b,c,e,f,g){b=b||d.defaultSuccess,c=c||d.defaultError,e=e||d.defaultHandler,f=f||d.defaultHttpClient,g=g||d.defaultMetadata,a.recognizeDates=h(a.recognizeDates,d.jsonHandler.recognizeDates),a.callbackParameterName=h(a.callbackParameterName,d.defaultHttpClient.callbackParameterName),a.formatQueryString=h(a.formatQueryString,d.defaultHttpClient.formatQueryString),a.enableJsonpCallback=h(a.enableJsonpCallback,d.defaultHttpClient.enableJsonpCallback),a.useJsonLight=h(a.useJsonLight,d.jsonHandler.enableJsonpCallback),a.inferJsonLightFeedAsObject=h(a.inferJsonLightFeedAsObject,d.jsonHandler.inferJsonLightFeedAsObject);var i={metadata:g,recognizeDates:a.recognizeDates,callbackParameterName:a.callbackParameterName,formatQueryString:a.formatQueryString,enableJsonpCallback:a.enableJsonpCallback,useJsonLight:a.useJsonLight,inferJsonLightFeedAsObject:a.inferJsonLightFeedAsObject};
try{return jd(a,e,i),xc(a,b,c,e,f,i)}catch(j){c(j)}},d.parseMetadata=function(a){return zg(null,a)},d.batchHandler.partHandler=d.defaultHandler;var si=null,ti=function(){var a={v:this.valueOf(),t:"[object Date]"};for(var b in this)a[b]=this[b];return a},ui=function(a,b){if(b&&"[object Date]"===b.t){var c=new Date(b.v);for(var d in b)"t"!==d&&"v"!==d&&(c[d]=b[d]);b=c}return b},vi=function(a,b){return a.name+"#!#"+b},wi=function(a,b){return b.replace(a.name+"#!#","")},xi=function(a){this.name=a};xi.create=function(b){if(xi.isSupported())return si=si||a.localStorage,new xi(b);throw{message:"Web Storage not supported by the browser"}},xi.isSupported=function(){return!!a.localStorage},xi.prototype.add=function(a,b,c,d){d=d||this.defaultError;var e=this;this.contains(a,function(f){f?i(d,{message:"key already exists",key:a}):e.addOrUpdate(a,b,c,d)},d)},xi.prototype.addOrUpdate=function(c,d,e,f){if(f=f||this.defaultError,c instanceof Array)f({message:"Array of keys not supported"});else{var g=vi(this,c),h=Date.prototype.toJSON;try{var j=d;j!==b&&(Date.prototype.toJSON=ti,j=a.JSON.stringify(d)),si.setItem(g,j),i(e,c,d)}catch(k){22===k.code||2147942414===k.number?i(f,{name:"QUOTA_EXCEEDED_ERR",error:k}):i(f,k)}finally{Date.prototype.toJSON=h}}},xi.prototype.clear=function(a,b){b=b||this.defaultError;try{for(var c=0,d=si.length;d>0&&d>c;){var e=si.key(c),f=wi(this,e);e!==f?(si.removeItem(e),d=si.length):c++}i(a)}catch(g){i(b,g)}},xi.prototype.close=function(){},xi.prototype.contains=function(a,b,c){c=c||this.defaultError;try{var d=vi(this,a),e=si.getItem(d);i(b,null!==e)}catch(f){i(c,f)}},xi.prototype.defaultError=q,xi.prototype.getAllKeys=function(a,b){b=b||this.defaultError;var c,d,e=[];try{for(c=0,d=si.length;d>c;c++){var f=si.key(c),g=wi(this,f);f!==g&&e.push(g)}i(a,e)}catch(h){i(b,h)}},xi.prototype.mechanism="dom",xi.prototype.read=function(c,d,e){if(e=e||this.defaultError,c instanceof Array)e({message:"Array of keys not supported"});else try{var f=vi(this,c),g=si.getItem(f);g=null!==g&&"undefined"!==g?a.JSON.parse(g,ui):b,i(d,c,g)}catch(h){i(e,h)}},xi.prototype.remove=function(a,b,c){if(c=c||this.defaultError,a instanceof Array)c({message:"Batches not supported"});else try{var d=vi(this,a);si.removeItem(d),i(b)}catch(e){i(c,e)}},xi.prototype.update=function(a,b,c,d){d=d||this.defaultError;var e=this;this.contains(a,function(f){f?e.addOrUpdate(a,b,c,d):i(d,{message:"key not found",key:a})},d)};var yi=a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB||a.indexedDB,zi=a.IDBKeyRange||a.webkitIDBKeyRange,Ai=a.IDBTransaction||a.webkitIDBTransaction||{},Bi=Ai.READ_ONLY||"readonly",Ci=Ai.READ_WRITE||"readwrite",Di=function(a,b){return function(c){var d=a||b;if(d){if("[object IDBDatabaseException]"===Object.prototype.toString.call(c))return 11===c.code?void d({name:"QuotaExceededError",error:c}):void d(c);var e;try{var f=c.target.error||c;e=f.name}catch(g){e="blocked"===c.type?"IndexedDBBlocked":"UnknownError"}d({name:e,error:c})}}},Ei=function(a,b,c){var d=a.name,e="_datajs_"+d,f=yi.open(e);f.onblocked=c,f.onerror=c,f.onupgradeneeded=function(){var a=f.result;a.objectStoreNames.contains(d)||a.createObjectStore(d)},f.onsuccess=function(a){var e=f.result;if(!e.objectStoreNames.contains(d)){if("setVersion"in e){var g=e.setVersion("1.0");return g.onsuccess=function(){var a=g.transaction;a.oncomplete=function(){b(e)},e.createObjectStore(d,null,!1)},g.onerror=c,void(g.onblocked=c)}return a.target.error={name:"DBSchemaMismatch"},void c(a)}e.onversionchange=function(a){a.target.close()},b(e)}},Fi=function(a,b,c,d){var e=a.name,f=a.db,g=Di(d,a.defaultError);return f?void c(f.transaction(e,b)):void Ei(a,function(d){a.db=d,c(d.transaction(e,b))},g)},Gi=function(a){this.name=a};Gi.create=function(a){if(Gi.isSupported())return new Gi(a);throw{message:"IndexedDB is not supported on this browser"}},Gi.isSupported=function(){return!!yi},Gi.prototype.add=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),Fi(this,Ci,function(i){i.onabort=Di(d,f,a,"add"),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++)i.objectStore(e).add({v:h[j]},g[j])},d)},Gi.prototype.addOrUpdate=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),Fi(this,Ci,function(i){i.onabort=Di(d,f),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++){var k={v:h[j]};i.objectStore(e).put(k,g[j])}},d)},Gi.prototype.clear=function(a,b){var c=this.name,d=this.defaultError;Fi(this,Ci,function(e){e.onerror=Di(b,d),e.oncomplete=function(){a()},e.objectStore(c).clear()},b)},Gi.prototype.close=function(){this.db&&(this.db.close(),this.db=null)},Gi.prototype.contains=function(a,b,c){var d=this.name,e=this.defaultError;Fi(this,Bi,function(f){var g=f.objectStore(d),h=g.get(a);f.oncomplete=function(){b(!!h.result)},f.onerror=Di(c,e)},c)},Gi.prototype.defaultError=q,Gi.prototype.getAllKeys=function(a,b){var c=this.name,d=this.defaultError;Fi(this,Ci,function(e){var f=[];e.oncomplete=function(){a(f)};var g=e.objectStore(c).openCursor();g.onerror=Di(b,d),g.onsuccess=function(a){var b=a.target.result;b&&(f.push(b.key),b["continue"].call(b))}},b)},Gi.prototype.mechanism="indexeddb",Gi.prototype.read=function(a,c,d){var e=this.name,f=this.defaultError,g=a instanceof Array?a:[a];Fi(this,Bi,function(h){var i=[];h.onerror=Di(d,f,a,"read"),h.oncomplete=function(){a instanceof Array?c(g,i):c(g[0],i[0])};for(var j=0;j<g.length;j++){var k=h.objectStore(e),l=k.get.call(k,g[j]);l.onsuccess=function(a){var c=a.target.result;i.push(c?c.v:b)}}},d)},Gi.prototype.remove=function(a,b,c){var d=this.name,e=this.defaultError,f=a instanceof Array?a:[a];Fi(this,Ci,function(a){a.onerror=Di(c,e),a.oncomplete=function(){b()};for(var g=0;g<f.length;g++){var h=a.objectStore(d);h["delete"].call(h,f[g])}},c)},Gi.prototype.update=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),Fi(this,Ci,function(i){i.onabort=Di(d,f),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++){var k=i.objectStore(e).openCursor(zi.only(g[j])),l={v:h[j]};k.pair={key:g[j],value:l},k.onsuccess=function(a){var b=a.target.result;b?b.update(a.target.pair.value):i.abort()}}},d)};var Hi=function(a){var c=[],d=[],e={};this.name=a;var f=function(a){return a||this.defaultError},g=function(a,c){var d;return a instanceof Array&&(d="Array of keys not supported"),(a===b||null===a)&&(d="Invalid key"),d?(i(c,{message:d}),!1):!0};this.add=function(a,b,c,d){d=f(d),g(a,d)&&(e.hasOwnProperty(a)?d({message:"key already exists",key:a}):this.addOrUpdate(a,b,c,d))},this.addOrUpdate=function(a,h,j,k){if(k=f(k),g(a,k)){var l=e[a];l===b&&(l=c.length>0?c.splice(0,1):d.length),d[l]=h,e[a]=l,i(j,a,h)}},this.clear=function(a){d=[],e={},c=[],i(a)},this.contains=function(a,b){var c=e.hasOwnProperty(a);i(b,c)},this.getAllKeys=function(a){var b=[];for(var c in e)b.push(c);i(a,b)},this.read=function(a,b,c){if(c=f(c),g(a,c)){var h=e[a];i(b,a,d[h])}},this.remove=function(a,h,j){if(j=f(j),g(a,j)){var k=e[a];k!==b&&(k===d.length-1?d.pop():(d[k]=b,c.push(k)),delete e[a],0===d.length&&(c=[])),i(h)}},this.update=function(a,b,c,d){d=f(d),g(a,d)&&(e.hasOwnProperty(a)?this.addOrUpdate(a,b,c,d):d({message:"key not found",key:a}))}};Hi.create=function(a){return new Hi(a)},Hi.isSupported=function(){return!0},Hi.prototype.close=function(){},Hi.prototype.defaultError=q,Hi.prototype.mechanism="memory";var Ii={indexeddb:Gi,dom:xi,memory:Hi};c.defaultStoreMechanism="best",c.createStore=function(a,b){b||(b=c.defaultStoreMechanism),"best"===b&&(b=xi.isSupported()?"dom":"memory");var d=Ii[b];if(d)return d.create(a);throw{message:"Failed to create store",name:a,mechanism:b}};var Ji=function(a,b){var c=a.indexOf("?")>=0?"&":"?";return a+c+b},Ki=function(a,b){var c=a.indexOf("?"),d="";return c>=0&&(d=a.substr(c),a=a.substr(0,c)),"/"!==a[a.length-1]&&(a+="/"),a+b+d},Li=function(a,b){return{method:"GET",requestUri:a,user:b.user,password:b.password,enableJsonpCallback:b.enableJsonpCallback,callbackParameterName:b.callbackParameterName,formatQueryString:b.formatQueryString}},Mi=function(a,b,c,d){var e=Ni(a,b,[],c,d);return e},Ni=function(a,c,e,f,g){var h=Li(a,c),i=d.request(h,function(a){var b=a.__next,d=a.results;e=e.concat(d),b?i=Ni(b,c,e,f,g):f(e)},g,b,c.httpClient,c.metadata);return{abort:function(){i.abort()}}},Oi=function(a){var c=this,e=a.source;return c.identifier=z(encodeURI(decodeURI(e))),c.options=a,c.count=function(a,f){var g=c.options;return d.request(Li(Ki(e,"$count"),g),function(b){var c=o(b.toString());isNaN(c)?f({message:"Count is NaN",count:c}):a(c)},f,b,g.httpClient,g.metadata)},c.read=function(a,b,d,f){var g="$skip="+a+"&$top="+b;return Mi(Ji(e,g),c.options,d,f)},c},Pi=function(a,b){var c=Qi(a,b);if(c){var d=c.i-b.i,e=d+(a.c-a.d.length);a.d=a.d.concat(b.d.slice(d,e))}},Qi=function(a,b){var c,d=a.i+a.c,e=b.i+b.c,f=a.i>b.i?a.i:b.i,g=e>d?d:e;return g>=f&&(c={i:f,c:g-f}),c},Ri=function(a,c){if(a===b||"number"!=typeof a)throw{message:"'"+c+"' must be a number."};if(isNaN(a)||0>a||!isFinite(a))throw{message:"'"+c+"' must be greater than or equal to zero."}},Si=function(a,c){if(a!==b){if("number"!=typeof a)throw{message:"'"+c+"' must be a number."};if(isNaN(a)||0>=a||!isFinite(a))throw{message:"'"+c+"' must be greater than zero."}}},Ti=function(a,c){if(a!==b&&("number"!=typeof a||isNaN(a)||!isFinite(a)))throw{message:"'"+c+"' must be a number."}},Ui=function(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c]===b)return a.splice(c,1),!0;return!1},Vi=function(a){var b=0,c=typeof a;if("object"===c&&a)for(var d in a)b+=2*d.length+Vi(a[d]);else b="string"===c?2*a.length:8;return b},Wi=function(a,b,c){return a=Math.floor(a/c)*c,b=Math.ceil((b+1)/c)*c,{i:a,c:b-a}},Xi="destroy",Yi="idle",Zi="init",$i="read",_i="prefetch",aj="write",bj="cancel",cj="end",dj="error",ej="start",fj="wait",gj="clear",hj="done",ij="local",jj="save",kj="source",lj=function(a,b,c,d,e,f,g){var h,i,j=this;j.p=b,j.i=d,j.c=e,j.d=f,j.s=ej,j.canceled=!1,j.pending=g,j.oncomplete=null,j.cancel=function(){if(c){var a=j.s;a!==dj&&a!==cj&&a!==bj&&(j.canceled=!0,l(bj,h))}},j.complete=function(){l(cj,h)},j.error=function(a){j.canceled||l(dj,a)},j.run=function(a){i=a,j.transition(j.s,h)},j.wait=function(a){l(fj,a)};var k=function(b,c,d){switch(b){case ej:c!==Zi&&a(j,b,c,d);break;case fj:a(j,b,c,d);break;case bj:a(j,b,c,d),j.fireCanceled(),l(cj);break;case dj:a(j,b,c,d),j.canceled=!0,j.fireRejected(d),l(cj);break;case cj:j.oncomplete&&j.oncomplete(j),j.canceled||j.fireResolved(),a(j,b,c,d);break;default:a(j,b,c,d)}},l=function(a,b){j.s=a,h=b,k(a,i,b)};return j.transition=l,j};lj.prototype.fireResolved=function(){var a=this.p;a&&(this.p=null,a.resolve(this.d))},lj.prototype.fireRejected=function(a){var b=this.p;b&&(this.p=null,b.reject(a))},lj.prototype.fireCanceled=function(){this.fireRejected({canceled:!0,message:"Operation canceled"})};var mj=function(d){var e,g=Zi,h={counts:0,netReads:0,prefetches:0,cacheReads:0},k=[],l=[],m=[],n=0,p=!1,q=s(d.cacheSize,1048576),r=0,t=0,u=0,v=0===q,w=s(d.pageSize,50),x=s(d.prefetchSize,w),y="1.0",z=0,A=d.source;"string"==typeof A&&(A=new Oi(d)),A.options=d;var B=c.createStore(d.name,d.mechanism),C=this;C.onidle=d.idle,C.stats=h,C.count=function(){if(e)throw e;var a=Ab(),b=!1;if(p)return i(function(){a.resolve(r)}),a.promise();var c=A.count(function(b){c=null,h.counts++,a.resolve(b)},function(d){c=null,a.reject(j(d,{canceled:b}))});return j(a.promise(),{cancel:function(){c&&(b=!0,c.abort(),c=null)}})},C.clear=function(){if(e)throw e;if(0===k.length){var a=Ab(),b=new lj(S,a,!1);return L(b,k),a.promise()}return k[0].p},C.filterForward=function(a,b,c){return I(a,b,c,!1)},C.filterBack=function(a,b,c){return I(a,b,c,!0)},C.readRange=function(a,b){if(Ri(a,"index"),Ri(b,"count"),e)throw e;var c=Ab(),d=new lj(U,c,!0,a,b,[],0);return L(d,l),j(c.promise(),{cancel:function(){d.cancel()}})},C.ToObservable=C.toObservable=function(){if(!a.Rx||!a.Rx.Observable)throw{message:"Rx library not available - include rx.js"};if(e)throw e;return a.Rx.Observable.CreateWithDisposable(function(a){var b=!1,c=0,d=function(c){b||a.OnError(c)},e=function(f){if(!b){var g,h;for(g=0,h=f.length;h>g;g++)a.OnNext(f[g]);f.length<w?a.OnCompleted():(c+=w,C.readRange(c,w).then(e,d))}};return C.readRange(c,w).then(e,d),{Dispose:function(){b=!0}}})};var D=function(a){return function(b){e={message:a,error:b};var c,d;for(c=0,d=l.length;d>c;c++)l[c].fireRejected(e);for(c=0,d=k.length;d>c;c++)k[c].fireRejected(e);l=k=null}},E=function(a){if(a!==g){g=a;var b,c,d=k.concat(l,m);for(b=0,c=d.length;c>b;b++)d[b].run(g)}},F=function(){var a=new zb;return B.clear(function(){n=0,p=!1,r=0,t=0,u=0,v=0===q,h={counts:0,netReads:0,prefetches:0,cacheReads:0},C.stats=h,B.close(),a.resolve()},function(b){a.reject(b)}),a},G=function(a){var b=Ui(k,a);b||(b=Ui(l,a),b||Ui(m,a)),z--,E(Yi)},H=function(a){var b=new zb,c=!1,d=A.read(a,w,function(c){var d={i:a,c:c.length,d:c};b.resolve(d)},function(a){b.reject(a)});return j(b,{cancel:function(){d&&(d.abort(),c=!0,d=null)}})},I=function(a,b,c,d){if(a=o(a),b=o(b),isNaN(a))throw{message:"'index' must be a valid number.",index:a};if(isNaN(b))throw{message:"'count' must be a valid number.",count:b};if(e)throw e;a=Math.max(a,0);var f=Ab(),g=[],h=!1,i=null,k=function(a,e){h||(b>=0&&g.length>=b?f.resolve(g):i=C.readRange(a,e).then(function(h){for(var i=0,j=h.length;j>i&&(0>b||g.length<b);i++){var l=d?j-i-1:i,m=h[l];if(c(m)){var n={index:a+l,item:m};d?g.unshift(n):g.push(n)}}if(!d&&h.length<e||d&&0>=a)f.resolve(g);else{var o=d?Math.max(a-w,0):a+e;k(o,w)}},function(a){f.reject(a)}))},l=Wi(a,a,w),m=d?l.i:a,n=d?a-l.i+1:l.i+l.c-a;return k(m,n),j(f.promise(),{cancel:function(){i&&i.cancel(),h=!0}})},J=function(){C.onidle&&0===z&&C.onidle()},K=function(a){if(!p&&0!==x&&!v&&(0===m.length||m[0]&&-1!==m[0].c)){var b=new lj(T,null,!0,a,x,null,x);L(b,m)}},L=function(a,b){a.oncomplete=G,b.push(a),z++,a.run(g)},M=function(a){var c=!1,d=j(new zb,{cancel:function(){c=!0}}),e=P(d,"Read page from store failure");return B.contains(a,function(f){return c?void 0:f?void B.read(a,function(a,e){c||d.resolve(e!==b,e)},e):void d.resolve(!1)},e),d},N=function(a,b){var c=!1,d=j(new zb,{cancel:function(){c=!0}}),e=P(d,"Save page to store failure"),f=function(){d.resolve(!0)};if(b.c>0){var g=Vi(b);v=q>=0&&n+g>q,v?f():B.addOrUpdate(a,b,function(){Q(b,g),O(f,e)},e)}else Q(b,0),O(f,e);return d},O=function(a,b){var c={actualCacheSize:n,allDataLocal:p,cacheSize:q,collectionCount:r,highestSavedPage:t,highestSavedPageSize:u,pageSize:w,sourceId:A.identifier,version:y};B.addOrUpdate("__settings",c,a,b)},P=function(a){return function(){a.resolve(!1)}},Q=function(a,b){var c=a.c,d=a.i;0===c?t===d-w&&(r=t+u):(t=Math.max(t,d),t===d&&(u=c),n+=b,w>c&&!r&&(r=d+c)),p||r!==t+u||(p=!0)},R=function(a,b,c,d){var e=a.canceled&&b!==cj;return e&&b===bj&&d&&d.cancel&&d.cancel(),e},S=function(a,b,c){var d=a.transition;if(c!==Xi)return E(Xi),!0;switch(b){case ej:d(gj);break;case cj:J();break;case gj:F().then(function(){a.complete()}),a.wait();break;default:return!1}return!0},T=function(a,b,c,d){if(!R(a,b,c,d)){var e=a.transition;if(c!==_i)return c===Xi?b!==bj&&a.cancel():c===Yi&&E(_i),!0;switch(b){case ej:m[0]===a&&e(ij,a.i);break;case hj:var f=a.pending;f>0&&(f-=Math.min(f,d.c)),p||0===f||d.c<w||v?a.complete():(a.pending=f,e(ij,d.i+w));break;default:return V(a,b,c,d,!0)}}return!0},U=function(a,b,c,d){if(!R(a,b,c,d)){var e=a.transition;if(c!==$i&&b!==ej)return c===Xi?b!==ej&&a.cancel():c!==aj&&E($i),!0;switch(b){case ej:if(c===Yi||c===_i)if(E($i),a.c>0){var f=Wi(a.i,a.c,w);e(ij,f.i)}else e(hj,a);break;case hj:Pi(a,d);var g=a.d.length;a.c===g||d.c<w?(h.cacheReads++,K(d.i+d.c),a.complete()):e(ij,d.i+w);break;default:return V(a,b,c,d,!1)}}return!0},V=function(a,b,c,d,e){var f,g=a.error,i=a.transition,j=a.wait;switch(b){case cj:J();break;case ij:f=M(d).then(function(b,c){a.canceled||(b?i(hj,c):i(kj,d))});break;case kj:f=H(d).then(function(b){a.canceled||(e?h.prefetches++:h.netReads++,i(jj,b))},g);break;case jj:c!==aj&&(E(aj),f=N(d.i,d).then(function(b){a.canceled||(!b&&e&&(a.pending=0),i(hj,d)),E(Yi)}));break;default:return!1}return f&&(a.canceled?f.cancel():a.s===b&&j(f)),!0};return B.read("__settings",function(a,b){if(f(b)){var c=b.version;if(!c||0!==c.indexOf("1."))return void D("Unsupported cache store version "+c)();w!==b.pageSize||A.identifier!==b.sourceId?F().then(function(){E(Yi)},D("Unable to clear store during initialization")):(n=b.actualCacheSize,p=b.allDataLocal,q=b.cacheSize,r=b.collectionCount,t=b.highestSavedPage,u=b.highestSavedPageSize,y=c,E(Yi))}else O(function(){E(Yi)},D("Unable to write settings during initialization."))},D("Unable to read settings from store.")),C};c.createDataCache=function(a){if(Si(a.pageSize,"pageSize"),Ti(a.cacheSize,"cacheSize"),Ti(a.prefetchSize,"prefetchSize"),!f(a.name))throw{message:"Undefined or null name",options:a};if(!f(a.source))throw{message:"Undefined source",options:a};return new mj(a)}}(this),function(a){if(!a.adapter.get("OData1-3")){var b=a.$,c=a.utils,d=c.isString,e=c.createMapForArray,f=a.time,g=(f.parseSFDate,f.parseSFDateTime),h=f.parseDateTimeString,i=f.getSFDateTime,j=1,k=function(){return window.OData?b.Deferred().resolve().promise():c.loadJS("/resource/"+c.getCacheTimestamp()+"/skuid__DataJS")},l=function(c){var d=b.Deferred(),f=c.service;if(f.metadata)d.resolve(f.metadata);else{var g=OData.defaultHttpClient,h={request:function(d,e,h){var i=f.createHTTPRequest({body:d.body,url:d.requestUri,headers:b.extend(d.headers,c.headers)});return f.useApexProxy?(f.authentication&&f.authentication.success&&(i.isAuthenticated=!0),a.ajax.proxy(i).done(function(a){var b={requestUri:d.requestUri,statusCode:a.statusCode,statusText:a.status,headers:a.headers,body:a.body};a.statusCode>=200&&a.statusCode<300?e(b):h(a.status,b)}).fail(function(){h()})):(b.extend(d,{requestUri:i.url,body:i.body,headers:i.headers}),g.request(d,function(a){e(a)},function(){h()}))}};OData.defaultHttpClient=h,OData.read({requestUri:f.serviceUrl+"/$metadata"},function(a,c){a&&a.dataServices?(e([a.dataServices],"schema","schemaMap","namespace",{addKeyRelationships:!1}),e(a.dataServices.schema,"association","associationMap","name",{addKeyRelationships:!1}),e(a.dataServices.schema,"entityContainer","entityContainerMap","name",{addKeyRelationships:!1}),e(a.dataServices.schema,"entityType","entityTypeMap","name",{addKeyRelationships:!1}),b.each(a.dataServices.schema,function(){var a=this;a.entityContainer&&(e(a.entityContainer,"associationSet","associationSetMap","name",{addKeyRelationships:!1}),e(a.entityContainer,"entitySet","entitySetMap","name",{addKeyRelationships:!1}),a.associationSetMap={},b.each(a.entityContainer,function(){b.extend(a.associationSetMap,this.associationSetMap)}),a.entitySetMap={},b.each(a.entityContainer,function(){b.extend(a.entitySetMap,this.entitySetMap)})),b.each(a.entityTypeMap,function(){this.__namespace=a.namespace})}),f.metadata=a,d.resolve(a)):d.reject(c.statusText+": "+c.body,c)},function(a,b){d.reject(a,b)},OData.metadataHandler)}return d.promise()},m=function(a){var c=b.Deferred();return a.service.authenticate().done(function(){n(a).done(function(a){c.resolve(a)}).fail(function(a,b){c.reject(a,b)})}).fail(function(a){c.reject(a)}),c.promise()},n=function(a){return k().then(function(){return l(a)})},o=function(b){var c,d,e;try{c=JSON.parse(b),d=c.error&&c.error.code,e=c.error&&c.error.message&&c.error.message.value}catch(f){}return c||(c=a.utils.makeXMLDoc(b),d=c.find("code").text(),e=c.find("message").text()),{code:d,message:e}},p=function(a){var b=a.split(".");return{name:b.pop(),nameSpace:b.join(".")}},q=function(a,c){var d=[];return b.each(a.dataServices.schemaMap,function(a,e){var f;if(c.entityContainer&&e.entityContainerMap){var g=e.entityContainerMap[c.entityContainer];f=g&&g.entitySetMap}else f=e.entitySetMap;f&&b.each(f,function(b){d.push(a+"."+b)})}),d},r=function(a,b){var c=p(a),d=b.dataServices.schemaMap[c.nameSpace].entitySetMap;return d&&d[c.name]},s=function(a,b){var c=p(a);return b.dataServices.schemaMap[c.nameSpace].entityTypeMap[c.name]},t=function(a,b){return s(a.entityType,b)},u=function(a,c,d){{var d={},e=a.key;a.baseType}return e&&e.propertyRef&&b.each(e.propertyRef,function(b,c){d[c.name]={id:c.name,entityType:a}}),d},v=function(a,c){{var d=c.key;c.baseType}return d?d.propertyRef.length>1?b.map(d.propertyRef,function(b){return b.name+"='"+a[b.name]+"'"}).join(","):a[d.propertyRef[0].name]+"":""+a.Id||a.ID||a.id},w=function(a,c,d,e){var f={},g=v(a,c,e);return b.each(d,function(b,c){f[c.id]=D(a,c,c.id)}),f.__metadata=a.__metadata,f.Id=g+"",f},x=function(a,b){var c=y(a.relationship,b),d=B(c,a.toRole);return d.type},y=function(a,b){var c=p(a);return b.dataServices.schemaMap[c.nameSpace].associationMap[c.name]},z=function(a,b,c){var d=[],e=c.dataServices.schemaMap[b].associationSetMap;for(var f in e)d.push(e[f]);return d.filter(function(b){return b.association===a})[0]},A=function(a,c){var d=[];return a.referentialConstraint&&b.each(a.referentialConstraint,function(a,e){e.role===c&&b.each(e.propertyRef,function(){d.push(this)})}),d},B=function(a,b){return a.end.filter(function(a){return a.role===b})[0]},C=function(a,b,c){var d=z(a.relationship,b,c);d||(d=y(a.relationship,c));var e=B(d,a.toRole);return e.entitySet&&b+"."+e.entitySet},D=function(a,b,c){var d,e=c.split(".");if(1===e.length){if("DATETIME"===b.displaytype){if(d=a[c]){var f;return f=d instanceof Date?d:h(d),i(f)}return null}return"Edm.Decimal"===b.edmtype||"Edm.Double"===b.edmtype?parseFloat(a[c]):"Edm.Int64"===b.edmtype?parseInt(a[c],10):a[c]}return d=a[e[0]],e.shift(),d?D(d,b,e.join(".")):null},E=function(e,f){var h=e.edmtype,i=c.adjustValueBasedOnQuotedness,j=function(a){return d(a)===!1?""+a:a};if("Edm.Binary"===h)f=window.btoa(f);else if(-1!==b.inArray(h,["Edm.Boolean","Edm.Byte","Edm.Double","Edm.Int16","Edm.Int32","Edm.SByte","Edm.Single"]))f=i(f,!1);else if(-1!==b.inArray(h,["Edm.Decimal","Edm.Guid","Edm.Int64","Edm.String"]))f=j(f);else if("Edm.DateTime"===h){var k=g(f);f=a.time.formatDate("yy-mm-ddT",k)+a.time.formatTime("HH:mm:ss.SSSZ",k)}else if("Edm.DateTimeOffset"===h){var k=g(f);f=a.time.formatDate("yy-mm-ddT",k)+a.time.formatTime("HH:mm:ss.SSS000Z",k),f=f.slice(0,-2)+":"+f.slice(-2)}return f},F=function(a,b,c,d,e){var f=a.split("."),g=b.property.concat(b.navigationProperty).filter(function(a){return a?f[0]===a.name:!1})[0];if(1===f.length)return g;var h=x(g,c),i=s(h,c);return d&&(d[(e&&e+"/"||"")+f.slice(0,f.length-1).join("/")]=!0),f.shift(),F(f.join("."),i)},G=function(a,b){return a.extensions?a.extensions.filter(function(a){return a.name===b}).length>0:!1},H=function(a,c,d,e,f,g){var h=p(c).nameSpace;if(e){var i={};b.each(e,function(a,b){i[b.id]=b}),b.each(u(a,d),function(a,b){i[b.id]||e.push(b)})}else e=[],a.property&&b.each(a.property,function(){e.push({id:this.name})}),a.navigationProperty&&b.each(a.navigationProperty,function(){e.push({id:this.name})});var j=function(a,c,e){if(a.uiOnly===!0)return a;var i=F(a.id,c,d,g,e&&e.id);if(i){var j=!G(i,"StoreGeneratedPattern"),k=a.id.split(".").join("/");if(typeMap={"Edm.String":"STRING","Edm.Boolean":"BOOLEAN","Edm.Date":"DATE","Edm.DateTime":"DATETIME","Edm.DateTimeOffset":"DATETIME","Edm.Int16":"NUMBER","Edm.Int32":"NUMBER","Edm.Decimal":"NUMBER","Edm.Double":"NUMBER","Edm.Int64":"NUMBER","Edm.Guid":"STRING"},fieldMetadata={id:a.id,accessible:!0,createable:j,editable:j,sortable:!0,label:i.name,displaytype:typeMap[i.type]||i.type,edmtype:i.type},void 0!==e&&(k=e.id+"/"+k),f&&(f[k]=!0),i.fromRole){var l=y(i.relationship,d),m=B(l,i.toRole);if(fieldMetadata.rel=a.id,-1!==b.inArray(m.multiplicity,["0..1","1"])){var n=C(i,h,d);if(!n){var l=y(i.relationship,d);n=B(l,i.toRole).type}fieldMetadata.displaytype="REFERENCE",fieldMetadata.ref=n,fieldMetadata.referenceTo=[{objectName:n}]}else{g&&(g[k]=!0),fieldMetadata.displaytype="ARRAY",fieldMetadata.type="array",fieldMetadata.dataPath="results",fieldMetadata.ref=m.type,fieldMetadata.referenceTo=[{objectName:m.type}],fieldMetadata.relationshipName=i.name,fieldMetadata.childSObject=m.type;var o=A(l,i.toRole);fieldMetadata.field=o.length&&o[0].name}}return"STRING"===fieldMetadata.displaytype&&(fieldMetadata.filterable=!0),a.overrideMetadata&&b.extend(fieldMetadata,a),fieldMetadata}};return b.map(e,function(c){var e=j(c,a),f=c.subFields||[];return f&&f.length>0&&(e.subFields=[],b.each(f,function(a,b){var f=s(e.ref,d);e.subFields.push(j(b,f,c))})),e})},I=function(a,d){var e="",f=b.map(a,function(a){var b=J(a);return b||"!!"});return f.length&&(d=d||b.map(a,function(a,b){return a.inactive!==!0?b+1+"":void 0}).join(" AND "),d&&(e=c.makeConditionLogicString(d,f,{customAndString:" and ",customOrString:" or "}),e=e.replace(/\(\)/g,""),-1!==e.indexOf("!!")&&(e=e.replace(/(((AND)|(OR)) ?!!)|(!! ?((AND)|(OR)))|!!/gi,"").trim()))),e},J=function(a){var c=function(a,b){return a.field+" "+(b||"eq")+" "+(a.encloseValueInQuotes!==!1?"'":"")+a.value+(a.encloseValueInQuotes!==!1?"'":"")},d=function(a,b,c){var d=a.field.split(".").join("/"),e=(a.encloseValueInQuotes!==!1?"'":"")+a.value+(a.encloseValueInQuotes!==!1?"'":"");return b+"("+(c===!0?e:d)+","+(c===!0?d:e)+")"},e=function(a){var d=[],e=a.field;return b.each(a.values,function(){d.push("("+c({field:e,value:this,encloseValueInQuotes:a.encloseValueInQuotes},"eq")+")")}),"("+d.join(" or ")+")"},f={"=":function(a){return c(a,"eq")},"!=":function(a){return c(a,"ne")},gt:function(a){return c(a,"gt")},lt:function(a){return c(a,"lt")},gte:function(a){return c(a,"ge")},lte:function(a){return c(a,"le")},contains:function(a){return d(a,"substringof",!0)},"does not contain":function(a){return d(a,"not substringof",!0)},"starts with":function(a){return d(a,"startswith")},"does not start with":function(a){return d(a,"not startswith")},"ends with":function(a){return d(a,"endswith")},"does not end with":function(a){return d(a,"not endswith")},"in":function(a){return e(a)},"not in":function(a){return"not "+e(a)},">":function(a){return this.gt(a)},">=":function(a){return this.gte(a)},"<":function(a){return this.lt(a)},"<=":function(a){return this.lte(a)}};return a.inactive?"":"group"===a.type?I(a.subConditions,a.subConditionLogic):f[a.operator](a)},K={save:function(c,e){var f=b.Deferred();return m(e).then(function(g){var h=[];b.each(c.operations,function(c,d){var f=b.Deferred(),i=a.model.getModel(d.id),j=[],k=r(d.type,g),l=t(k,g),m=function(a,b,c){var d=i.getRowById(c),e=r(a.ref,g),f=s(e.entityType,g);return b?{__metadata:{uri:e.name+"("+b+")",id:d[a.id].__metadata.id,type:f.__namespace+"."+f.name}}:null};h.push(f),b.each(d.changes,function(a,c){var d={},e=(i.getRowById(a).__metadata,a);K.isNewId(a)?(b.each(c,function(a,b){var c=i.getField(a);d[a]="REFERENCE"===c.displaytype?m(c,b,e):E(c,b)}),d.__metadata={type:l.__namespace+"."+l.name},j.push({requestUri:k.name,method:"POST",data:d,__oldid:a,headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"}})):c.__deleted?j.push({requestUri:k.name+"("+a+")",method:"DELETE",__oldid:a,headers:{"If-Match":"*",Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"}}):(b.each(c,function(a,b){var c=i.getField(a);d[a]="REFERENCE"===c.displaytype?m(c,b,e):E(c,b)}),l.key?d[l.key.propertyRef[0].name]=a:d.ID=a,d.__metadata={type:l.__namespace+"."+l.name},j.push({requestUri:k.name+"("+a+")",method:"MERGE",data:d,__oldid:a,headers:{"If-Match":"*",Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"}}))}),OData.request({requestUri:e.service.serviceUrl+"/$batch",method:"POST",data:{__batchRequests:[{__changeRequests:j}]}},function(a,c){var e=[],h=[],k=[],m=!0,n=function(a,b){var c=j[b],f=[],n=a.data?w(a.data,l,i.fields,g):null,p=a.statusCode?a.statusCode.substring(0,1):"4";if(a instanceof Error&&(p="2"),"4"===p||"5"===p){var q="There was a problem with an OData Batch Request: ",r=o(a.response&&a.response.body);r&&(q+=(r.code?r.code+" - ":"")+r.message),f.push({fields:[],message:q,rowId:c.__oldid,severity:"ERROR",status:"OData Error"})}"MERGE"===c.method?k.push({errors:f,id:c.__oldid,messages:[],record:n&&JSON.stringify(n),source:d.id,success:!f.length}):"POST"===c.method?h.push({errors:f,id:n&&v(n,l,g),messages:[],oldId:c.__oldid,record:n&&JSON.stringify(n),source:d.id,success:!f.length}):"DELETE"===c.method&&e.push({errors:f,id:c.__oldid,messages:[],source:d.id,success:!f.length}),f.length&&(m=!1)},p=c.statusCode?(c.statusCode+"").substring(0,1):"4";"4"===p||"5"===p?f.reject(c.statusCode+" - "+c.statusText+" - "+c.body,c):(b.each(c.data.__batchResponses,function(a,c){c.__changeResponses?b.each(c.__changeResponses,function(a,b){n(b,a)}):n(c,a)}),f.resolve({deleteResults:e,globalErrors:[],insertResults:h,totalsuccess:m,updateResults:k}))},function(a,b){f.reject({message:"There was an error connecting to the proxy.",response:b})},OData.batchHandler)}),b.when.all(h).then(function(a){var c={insertResults:[],updateResults:[],deleteResults:[],globalErrors:[],totalsuccess:!0};b.each(a,function(a,d){b.merge(c.insertResults,d.insertResults),b.merge(c.updateResults,d.updateResults),b.merge(c.deleteResults,d.deleteResults),d.totalsuccess===!1&&(c.totalsuccess=!1)}),f.resolve(c)},function(a){var c=[],e=[];b.each(a,function(a,b){d(b.message)&&c.push(b.message),b.response&&e.push(b.response)}),f.reject(c,e)})}),f.promise()},load:function(a,c){var d=b.Deferred(),e=[];return m(b.extend({},c,{service:a[0].service})).then(function(f){b.each(a,function(){var a,d=this,g=b.Deferred(),h=d.objectName,i={},j={};e.push(g.promise());var k=r(h,f),l=t(k,f),m=H(l,h,f,d.fields,i,j),n=b.map(d.conditions,function(a){var b=d.getConditionValueResult(a);return a.originalValue||(a.originalValue=b.value),a}),o=[],p=Object.keys(j),q=Object.keys(i);p.length&&o.push("$expand="+p.join(",")),q.length&&o.push("$select="+q.join(",")),d.orderByClause&&o.push("$orderby="+d.orderByClause.replace(/nulls first/gi,"").replace(/nulls last/gi,"").replace(/asc/gi,"asc").replace(/desc/gi,"desc"));var s=I(n,d.conditionLogic);s&&o.push("$filter="+s);var u=d.offsetPageNumber,v=d.offsetPageSize,x=v||d.recordsLimit&&d.recordsLimit;u>1&&v>0&&o.push("$skip="+(u-1)*v),(0===x||x>0)&&o.push("$top="+(parseInt(x,10)+1)),a=d.service.serviceUrl+"/"+k.name,o.length&&(a+="?"+encodeURI(o.join("&")));var y={requestUri:a};c&&b.extend(!0,y,c);var z={label:d.label||h,labelPlural:d.labelPlural||h,accessible:!0,createable:!0,updateable:!0,deleteable:!0,fields:m,conditions:n,soql:a};d.doQuery===!1?g.resolve(z):OData.read(y,function(a){var c,d=!1;c=a.results?b.map(a.results,function(a){return w(a,l,m,f)}):[],x&&c.length>x&&(d=!0,c.pop()),b.extend(z,{data:c,canRetrieveMoreRows:d}),g.resolve(z)},function(a){g.reject(a)},void 0,void 0,f)}),b.when.all(e).then(function(a){d.resolve(a)},function(a){var c="There was a problem with an OData Query: ";b.each(a,function(){var a=o(this.response&&this.response.body);a&&this.response&&(c+=(a.code?a.code+" - ":"")+a.message+" - Request URL: "+this.response.requestUri)}),d.reject(c)})},function(a,b){d.reject(a,b)}),d.promise()},getObjectList:function(a){var c=b.Deferred();return m(a).then(function(b){c.resolve(q(b,a))},function(a,b){c.reject(a,b)}),c.promise()},buildEntityMetadataRequest:function(a){var b=a.targetEntity;return!b&&a.model&&a.model.attr&&(b=a.model.attr("sobject")),{objectName:b}},getEntityMetadataLoadingMessageFromBreadcrumb:function(a){return"Loading metadata for external object "+a.endsobject+"..."},getEntityMetadataCacheKey:function(a){return d(a)?a:a.objectName},getEntityMetadata:function(a){{var c=b.Deferred(),e=a.entities;a.service}return m(a).then(function(a){var f=[];b.each(e,function(b,c){var e=d(c)?c:c.objectName,g=r(e,a),h=g?t(g,a):s(e,a),i=H(h,e,a);f.push({childRelationships:[],fields:i,label:e,labelPlural:e,objectName:e,readonly:!1})}),c.resolve(f)},function(a,b){c.reject(a,b)}),c.promise()},isNewId:function(a){return"__skuidtemp"===a.substring(0,11)
},getNewId:function(){return"__skuidtemp"+j++},getNameField:function(a){var b,c,d=a.service&&a.service.metadata,e="Id";return d&&(b=r(a.objectName,d),c=t(b,d),c.key&&c.key.propertyRef&&c.key.propertyRef.length&&(e=c.key.propertyRef[0].name)),e},properties:{composer:{supports:{childRelationships:!1},canFieldsBeSelected:function(a){return a.breadcrumb.endsobject?!0:"Select an external object for this Model."}},canAutoGenerateConditionsFromFields:!0,validConditionTypes:["fieldvalue","multiple","param","userinfo","blank","modelmerge"],canConditionsBeGrouped:!0},processFullyQualifiedName:function(a){return p(a)},name:"OData1-3"};new a.adapter.Adapter(K)}}(skuid);